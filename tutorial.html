<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3. Tutorial &mdash; WISDEM 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/nrel.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="WISDEM 0.1.0 documentation" href="index.html" />
    <link rel="next" title="4. Documentation for WISDEM" href="documentation.html" />
    <link rel="prev" title="2. Installation" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="documentation.html" title="4. Documentation for WISDEM"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="2. Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">WISDEM 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial">
<span id="tutorial-label"></span><h1>3. Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="tutorial-for-wisdem-with-nrel-csm">
<h2>3.1. Tutorial for WISDEM with NREL CSM<a class="headerlink" href="#tutorial-for-wisdem-with-nrel-csm" title="Permalink to this headline">¶</a></h2>
<p>As an example of WISDEM, let us use the NREL Cost and Scaling Model and simulate the NREL 5MW Reference Model [FAST2009] in a 500 mW offshore plant.</p>
<p>The first step is to import the relevant files and set up the component.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># A simple test of WISDEM using the NREL CSM</span>
<span class="kn">from</span> <span class="nn">wisdem.lcoe.lcoe_csm_assembly</span> <span class="kn">import</span> <span class="n">lcoe_csm_assembly</span>

<span class="n">lcoe</span> <span class="o">=</span> <span class="n">lcoe_csm_assembly</span><span class="p">()</span>
</pre></div>
</div>
<p>The NREL CSM relies on on a large number of wind turbine and plant parameters including overall wind turbine configuration, rotor, nacelle and tower options as well as plant characteristics including the number of turbines, wind resource characteristics and financial parameters.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># NREL 5 MW turbine specifications and plant attributes</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">machine_rating</span> <span class="o">=</span> <span class="mf">5000.0</span> <span class="c"># Float(units = &#39;kW&#39;, iotype=&#39;in&#39;, desc= &#39;rated machine power in kW&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">rotor_diameter</span> <span class="o">=</span> <span class="mf">126.0</span> <span class="c"># Float(units = &#39;m&#39;, iotype=&#39;in&#39;, desc= &#39;rotor diameter of the machine&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">max_tip_speed</span> <span class="o">=</span> <span class="mf">80.0</span> <span class="c"># Float(units = &#39;m/s&#39;, iotype=&#39;in&#39;, desc= &#39;maximum allowable tip speed for the rotor&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">hub_height</span> <span class="o">=</span> <span class="mf">90.0</span> <span class="c"># Float(units = &#39;m&#39;, iotype=&#39;in&#39;, desc=&#39;hub height of wind turbine above ground / sea level&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">sea_depth</span> <span class="o">=</span> <span class="mf">20.0</span> <span class="c"># Float(units = &#39;m&#39;, iotype=&#39;in&#39;, desc = &#39;sea depth for offshore wind project&#39;)</span>

<span class="c"># Parameters</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">drivetrain_design</span> <span class="o">=</span> <span class="s">&#39;geared&#39;</span> <span class="c"># Enum(&#39;geared&#39;, (&#39;geared&#39;, &#39;single_stage&#39;, &#39;multi_drive&#39;, &#39;pm_direct_drive&#39;), iotype=&#39;in&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">altitude</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c"># Float(0.0, units = &#39;m&#39;, iotype=&#39;in&#39;, desc= &#39;altitude of wind plant&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">turbine_number</span> <span class="o">=</span> <span class="mi">100</span> <span class="c"># Int(100, iotype=&#39;in&#39;, desc = &#39;total number of wind turbines at the plant&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="mi">2009</span> <span class="c"># Int(2009, iotype=&#39;in&#39;, desc = &#39;year of project start&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">month</span> <span class="o">=</span> <span class="mi">12</span> <span class="c"># Int(12, iotype=&#39;in&#39;, desc = &#39;month of project start&#39;)</span>

<span class="c"># Extra AEP inputs</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">max_power_coefficient</span> <span class="o">=</span> <span class="mf">0.488</span> <span class="c">#Float(0.488, iotype=&#39;in&#39;, desc= &#39;maximum power coefficient of rotor for operation in region 2&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">opt_tsr</span> <span class="o">=</span> <span class="mf">7.525</span> <span class="c">#Float(7.525, iotype=&#39;in&#39;, desc= &#39;optimum tip speed ratio for operation in region 2&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">cut_in_wind_speed</span> <span class="o">=</span> <span class="mf">3.0</span> <span class="c">#Float(3.0, units = &#39;m/s&#39;, iotype=&#39;in&#39;, desc= &#39;cut in wind speed for the wind turbine&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">cut_out_wind_speed</span> <span class="o">=</span> <span class="mf">25.0</span> <span class="c">#Float(25.0, units = &#39;m/s&#39;, iotype=&#39;in&#39;, desc= &#39;cut out wind speed for the wind turbine&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">hub_height</span> <span class="o">=</span> <span class="mf">90.0</span> <span class="c">#Float(90.0, units = &#39;m&#39;, iotype=&#39;in&#39;, desc= &#39;hub height of wind turbine above ground / sea level&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">altitude</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c">#Float(0.0, units = &#39;m&#39;, iotype=&#39;in&#39;, desc= &#39;altitude of wind plant&#39;)</span>
<span class="c">#lcoe.air_density = Float(0.0, units = &#39;kg / (m * m * m)&#39;, iotype=&#39;in&#39;, desc= &#39;air density at wind plant site&#39;)  # default air density value is 0.0 - forces aero csm to calculate air density in model</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">drivetrain_design</span> <span class="o">=</span> <span class="s">&#39;geared&#39;</span> <span class="c">#Enum(&#39;geared&#39;, (&#39;geared&#39;, &#39;single_stage&#39;, &#39;multi_drive&#39;, &#39;pm_direct_drive&#39;), iotype=&#39;in&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">shear_exponent</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c">#Float(0.1, iotype=&#39;in&#39;, desc= &#39;shear exponent for wind plant&#39;) #TODO - could use wind model here</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">wind_speed_50m</span> <span class="o">=</span> <span class="mf">8.02</span> <span class="c">#Float(8.35, units = &#39;m/s&#39;, iotype=&#39;in&#39;, desc=&#39;mean annual wind speed at 50 m height&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">weibull_k</span><span class="o">=</span> <span class="mf">2.15</span> <span class="c">#Float(2.1, iotype=&#39;in&#39;, desc = &#39;weibull shape factor for annual wind speed distribution&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">soiling_losses</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c">#Float(0.0, iotype=&#39;in&#39;, desc = &#39;energy losses due to blade soiling for the wind plant - average across turbines&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">array_losses</span> <span class="o">=</span> <span class="mf">0.10</span> <span class="c">#Float(0.06, iotype=&#39;in&#39;, desc = &#39;energy losses due to turbine interactions - across entire plant&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">availability</span> <span class="o">=</span> <span class="mf">0.941</span> <span class="c">#Float(0.94287630736, iotype=&#39;in&#39;, desc = &#39;average annual availbility of wind turbines at plant&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">turbine_number</span> <span class="o">=</span> <span class="mi">100</span> <span class="c">#Int(100, iotype=&#39;in&#39;, desc = &#39;total number of wind turbines at the plant&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">thrust_coefficient</span> <span class="o">=</span> <span class="mf">0.50</span> <span class="c">#Float(0.50, iotype=&#39;in&#39;, desc=&#39;thrust coefficient at rated power&#39;)</span>

<span class="c"># Extra TCC inputs</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">blade_number</span> <span class="o">=</span> <span class="mi">3</span> <span class="c">#Int(3, iotype=&#39;in&#39;, desc = &#39;number of rotor blades&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">offshore</span> <span class="o">=</span> <span class="bp">True</span> <span class="c">#Bool(True, iotype=&#39;in&#39;, desc = &#39;boolean for offshore&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">advanced_blade</span> <span class="o">=</span> <span class="bp">True</span> <span class="c">#Bool(False, iotype=&#39;in&#39;, desc = &#39;boolean for use of advanced blade curve&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">crane</span> <span class="o">=</span> <span class="bp">True</span> <span class="c">#Bool(True, iotype=&#39;in&#39;, desc = &#39;boolean for presence of a service crane up tower&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">advanced_bedplate</span> <span class="o">=</span> <span class="mi">0</span> <span class="c">#Int(0, iotype=&#39;in&#39;, desc= &#39;indicator for drivetrain bedplate design 0 - conventional&#39;)   </span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">advanced_tower</span> <span class="o">=</span> <span class="bp">False</span> <span class="c">#Bool(False, iotype=&#39;in&#39;, desc = &#39;advanced tower configuration&#39;)</span>

<span class="c"># Extra Finance inputs</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">fixed_charge_rate</span> <span class="o">=</span> <span class="mf">0.12</span> <span class="c">#Float(0.12, iotype = &#39;in&#39;, desc = &#39;fixed charge rate for coe calculation&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">construction_finance_rate</span> <span class="o">=</span> <span class="mf">0.00</span> <span class="c">#Float(0.00, iotype=&#39;in&#39;, desc = &#39;construction financing rate applied to overnight capital costs&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">tax_rate</span> <span class="o">=</span> <span class="mf">0.4</span> <span class="c">#Float(0.4, iotype = &#39;in&#39;, desc = &#39;tax rate applied to operations&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">discount_rate</span> <span class="o">=</span> <span class="mf">0.07</span> <span class="c">#Float(0.07, iotype = &#39;in&#39;, desc = &#39;applicable project discount rate&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">construction_time</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c">#Float(1.0, iotype = &#39;in&#39;, desc = &#39;number of years to complete project construction&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">project_lifetime</span> <span class="o">=</span> <span class="mf">20.0</span> <span class="c">#Float(20.0, iotype = &#39;in&#39;, desc = &#39;project lifetime for LCOE calculation&#39;)</span>
</pre></div>
</div>
<p>We can now simulate the overall wind plant cost of energy.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lcoe</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>We then print out the resulting cost values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="s">&quot;Cost of Energy results for a 500 MW offshore wind farm using the NREL 5 MW reference turbine&quot;</span>
<span class="k">print</span> <span class="s">&quot;LCOE: ${0:.4f} USD/kWh&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe</span><span class="o">.</span><span class="n">lcoe</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;COE: ${0:.4f} USD/kWh&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe</span><span class="o">.</span><span class="n">coe</span><span class="p">)</span>
<span class="k">print</span>
<span class="k">print</span> <span class="s">&quot;AEP per turbine: {0:1f} kWh/turbine&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe</span><span class="o">.</span><span class="n">net_aep</span> <span class="o">/</span> <span class="n">lcoe</span><span class="o">.</span><span class="n">turbine_number</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;Turbine Cost: ${0:2f} USD&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe</span><span class="o">.</span><span class="n">turbine_cost</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;BOS costs per turbine: ${0:2f} USD/turbine&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe</span><span class="o">.</span><span class="n">bos_costs</span> <span class="o">/</span> <span class="n">lcoe</span><span class="o">.</span><span class="n">turbine_number</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;OPEX per turbine: ${0:2f} USD/turbine&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe</span><span class="o">.</span><span class="n">avg_annual_opex</span> <span class="o">/</span> <span class="n">lcoe</span><span class="o">.</span><span class="n">turbine_number</span><span class="p">)</span>
<span class="k">print</span>
</pre></div>
</div>
<p>The result is:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; Cost of Energy results for a 500 MW offshore wind farm using the NREL 5 MW reference turbine
&gt;&gt;&gt; LCOE: $0.1113 USD/kWh
&gt;&gt;&gt; COE: $0.1191 USD/kWh
&gt;&gt;&gt;
&gt;&gt;&gt; AEP per turbine: 16915536.836031 kWh/turbine
&gt;&gt;&gt; Turbine Cost: $5950210.271159 USD
&gt;&gt;&gt; BOS costs per turbine: $7664647.465834 USD/turbine
&gt;&gt;&gt; OPEX per turbine: $473476.639865 USD/turbine
</pre></div>
</div>
</div>
<div class="section" id="tutorial-for-wisdem-with-nrel-csm-plus-ecn-offshore-opex-model">
<h2>3.2. Tutorial for WISDEM with NREL CSM plus ECN Offshore OPEX Model<a class="headerlink" href="#tutorial-for-wisdem-with-nrel-csm-plus-ecn-offshore-opex-model" title="Permalink to this headline">¶</a></h2>
<p>If you have the ECN Offshore OPEX model and license (see (Plant_CostsSE documentation for details)`http://wisdem.github.io/Plant_CostsSE/<a href="#id2"><span class="problematic" id="id3">`</span></a>_) then you can incorporate it into your analysis along with the NREL CSM model.</p>
<p>The first step is to again import the relevant files and set up the component.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># A simple test of WISDEM using the NREL CSM along with the ECN Offshore OPEX Model</span>
<span class="kn">from</span> <span class="nn">wisdem.lcoe.lcoe_csm_ecn_assembly</span> <span class="kn">import</span> <span class="n">lcoe_csm_ecn_assembly</span>

<span class="n">lcoe</span> <span class="o">=</span> <span class="n">lcoe_csm_ecn_assembly</span><span class="p">(</span><span class="s">&#39;C:/Models/ECN Model/ECN O&amp;M Model.xls&#39;</span><span class="p">)</span> <span class="c"># Substitute your own path to the ECN Model</span>
</pre></div>
</div>
<p>Similar to before, the NREL CSM plus the ECN Offshore OPEX Model assembly relies on on a large number of wind turbine and plant parameters including overall wind turbine configuration, rotor, nacelle and tower options as well as plant characteristics including the number of turbines, wind resource characteristics and financial parameters.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># NREL 5 MW turbine specifications and plant attributes</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">machine_rating</span> <span class="o">=</span> <span class="mf">5000.0</span> <span class="c"># Float(units = &#39;kW&#39;, iotype=&#39;in&#39;, desc= &#39;rated machine power in kW&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">rotor_diameter</span> <span class="o">=</span> <span class="mf">126.0</span> <span class="c"># Float(units = &#39;m&#39;, iotype=&#39;in&#39;, desc= &#39;rotor diameter of the machine&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">max_tip_speed</span> <span class="o">=</span> <span class="mf">80.0</span> <span class="c"># Float(units = &#39;m/s&#39;, iotype=&#39;in&#39;, desc= &#39;maximum allowable tip speed for the rotor&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">hub_height</span> <span class="o">=</span> <span class="mf">90.0</span> <span class="c"># Float(units = &#39;m&#39;, iotype=&#39;in&#39;, desc=&#39;hub height of wind turbine above ground / sea level&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">sea_depth</span> <span class="o">=</span> <span class="mf">20.0</span> <span class="c"># Float(units = &#39;m&#39;, iotype=&#39;in&#39;, desc = &#39;sea depth for offshore wind project&#39;)</span>

<span class="c"># Parameters</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">drivetrain_design</span> <span class="o">=</span> <span class="s">&#39;geared&#39;</span> <span class="c"># Enum(&#39;geared&#39;, (&#39;geared&#39;, &#39;single_stage&#39;, &#39;multi_drive&#39;, &#39;pm_direct_drive&#39;), iotype=&#39;in&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">altitude</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c"># Float(0.0, units = &#39;m&#39;, iotype=&#39;in&#39;, desc= &#39;altitude of wind plant&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">turbine_number</span> <span class="o">=</span> <span class="mi">100</span> <span class="c"># Int(100, iotype=&#39;in&#39;, desc = &#39;total number of wind turbines at the plant&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="mi">2009</span> <span class="c"># Int(2009, iotype=&#39;in&#39;, desc = &#39;year of project start&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">month</span> <span class="o">=</span> <span class="mi">12</span> <span class="c"># Int(12, iotype=&#39;in&#39;, desc = &#39;month of project start&#39;)</span>

<span class="c"># Extra AEP inputs</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">max_power_coefficient</span> <span class="o">=</span> <span class="mf">0.488</span> <span class="c">#Float(0.488, iotype=&#39;in&#39;, desc= &#39;maximum power coefficient of rotor for operation in region 2&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">opt_tsr</span> <span class="o">=</span> <span class="mf">7.525</span> <span class="c">#Float(7.525, iotype=&#39;in&#39;, desc= &#39;optimum tip speed ratio for operation in region 2&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">cut_in_wind_speed</span> <span class="o">=</span> <span class="mf">3.0</span> <span class="c">#Float(3.0, units = &#39;m/s&#39;, iotype=&#39;in&#39;, desc= &#39;cut in wind speed for the wind turbine&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">cut_out_wind_speed</span> <span class="o">=</span> <span class="mf">25.0</span> <span class="c">#Float(25.0, units = &#39;m/s&#39;, iotype=&#39;in&#39;, desc= &#39;cut out wind speed for the wind turbine&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">hub_height</span> <span class="o">=</span> <span class="mf">90.0</span> <span class="c">#Float(90.0, units = &#39;m&#39;, iotype=&#39;in&#39;, desc= &#39;hub height of wind turbine above ground / sea level&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">altitude</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c">#Float(0.0, units = &#39;m&#39;, iotype=&#39;in&#39;, desc= &#39;altitude of wind plant&#39;)</span>
<span class="c">#lcoe.air_density = Float(0.0, units = &#39;kg / (m * m * m)&#39;, iotype=&#39;in&#39;, desc= &#39;air density at wind plant site&#39;)  # default air density value is 0.0 - forces aero csm to calculate air density in model</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">drivetrain_design</span> <span class="o">=</span> <span class="s">&#39;geared&#39;</span> <span class="c">#Enum(&#39;geared&#39;, (&#39;geared&#39;, &#39;single_stage&#39;, &#39;multi_drive&#39;, &#39;pm_direct_drive&#39;), iotype=&#39;in&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">shear_exponent</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c">#Float(0.1, iotype=&#39;in&#39;, desc= &#39;shear exponent for wind plant&#39;) #TODO - could use wind model here</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">wind_speed_50m</span> <span class="o">=</span> <span class="mf">8.02</span> <span class="c">#Float(8.35, units = &#39;m/s&#39;, iotype=&#39;in&#39;, desc=&#39;mean annual wind speed at 50 m height&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">weibull_k</span><span class="o">=</span> <span class="mf">2.15</span> <span class="c">#Float(2.1, iotype=&#39;in&#39;, desc = &#39;weibull shape factor for annual wind speed distribution&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">soiling_losses</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c">#Float(0.0, iotype=&#39;in&#39;, desc = &#39;energy losses due to blade soiling for the wind plant - average across turbines&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">array_losses</span> <span class="o">=</span> <span class="mf">0.10</span> <span class="c">#Float(0.06, iotype=&#39;in&#39;, desc = &#39;energy losses due to turbine interactions - across entire plant&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">availability</span> <span class="o">=</span> <span class="mf">0.941</span> <span class="c">#Float(0.94287630736, iotype=&#39;in&#39;, desc = &#39;average annual availbility of wind turbines at plant&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">turbine_number</span> <span class="o">=</span> <span class="mi">100</span> <span class="c">#Int(100, iotype=&#39;in&#39;, desc = &#39;total number of wind turbines at the plant&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">thrust_coefficient</span> <span class="o">=</span> <span class="mf">0.50</span> <span class="c">#Float(0.50, iotype=&#39;in&#39;, desc=&#39;thrust coefficient at rated power&#39;)</span>

<span class="c"># Extra TCC inputs</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">blade_number</span> <span class="o">=</span> <span class="mi">3</span> <span class="c">#Int(3, iotype=&#39;in&#39;, desc = &#39;number of rotor blades&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">offshore</span> <span class="o">=</span> <span class="bp">True</span> <span class="c">#Bool(True, iotype=&#39;in&#39;, desc = &#39;boolean for offshore&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">advanced_blade</span> <span class="o">=</span> <span class="bp">True</span> <span class="c">#Bool(False, iotype=&#39;in&#39;, desc = &#39;boolean for use of advanced blade curve&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">crane</span> <span class="o">=</span> <span class="bp">True</span> <span class="c">#Bool(True, iotype=&#39;in&#39;, desc = &#39;boolean for presence of a service crane up tower&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">advanced_bedplate</span> <span class="o">=</span> <span class="mi">0</span> <span class="c">#Int(0, iotype=&#39;in&#39;, desc= &#39;indicator for drivetrain bedplate design 0 - conventional&#39;)   </span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">advanced_tower</span> <span class="o">=</span> <span class="bp">False</span> <span class="c">#Bool(False, iotype=&#39;in&#39;, desc = &#39;advanced tower configuration&#39;)</span>

<span class="c"># Extra Finance inputs</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">fixed_charge_rate</span> <span class="o">=</span> <span class="mf">0.12</span> <span class="c">#Float(0.12, iotype = &#39;in&#39;, desc = &#39;fixed charge rate for coe calculation&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">construction_finance_rate</span> <span class="o">=</span> <span class="mf">0.00</span> <span class="c">#Float(0.00, iotype=&#39;in&#39;, desc = &#39;construction financing rate applied to overnight capital costs&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">tax_rate</span> <span class="o">=</span> <span class="mf">0.4</span> <span class="c">#Float(0.4, iotype = &#39;in&#39;, desc = &#39;tax rate applied to operations&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">discount_rate</span> <span class="o">=</span> <span class="mf">0.07</span> <span class="c">#Float(0.07, iotype = &#39;in&#39;, desc = &#39;applicable project discount rate&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">construction_time</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c">#Float(1.0, iotype = &#39;in&#39;, desc = &#39;number of years to complete project construction&#39;)</span>
<span class="n">lcoe</span><span class="o">.</span><span class="n">project_lifetime</span> <span class="o">=</span> <span class="mf">20.0</span> <span class="c">#Float(20.0, iotype = &#39;in&#39;, desc = &#39;project lifetime for LCOE calculation&#39;)</span>
</pre></div>
</div>
<p>We can now simulate the overall wind plant cost of energy.</p>
<div class="highlight-python"><div class="highlight"><pre>
</pre></div>
</div>
<p>We then print out the resulting cost values:</p>
<div class="highlight-python"><div class="highlight"><pre>
</pre></div>
</div>
<p>The result is:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; Cost of Energy results for a 500 MW offshore wind farm using the NREL 5 MW reference turbine
&gt;&gt;&gt; LCOE: $0.1088 USD/kWh
&gt;&gt;&gt; COE: $0.1175 USD/kWh
&gt;&gt;&gt;
&gt;&gt;&gt; AEP per turbine: 16949265.578077 kWh/turbine
&gt;&gt;&gt; Turbine Cost: $5950210.271159 USD
&gt;&gt;&gt; BOS costs per turbine: $7664647.465834 USD/turbine
&gt;&gt;&gt; OPEX per turbine: $433958.907447 USD/turbine
</pre></div>
</div>
</div>
<div class="section" id="tutorial-for-turbine-assembly">
<h2>3.3. Tutorial for Turbine Assembly<a class="headerlink" href="#tutorial-for-turbine-assembly" title="Permalink to this headline">¶</a></h2>
<p>The turbine assembly is a nested assembly and contains subassemblies for the rotor, hub, nacelle, and tower.  Determining what inputs need to be set, and which are already connected through the assembly, can be challenging for one of these large assemblies.  There is a helper method <tt class="docutils literal"><span class="pre">print_vars</span></tt> in commonse noted below.  This can be particularly useful as the models are udpated and different variable sets are used.</p>
<div class="highlight-python"><div class="highlight"><pre>    import os
    from rotorse.precomp import Profile, Orthotropic2DMaterial, CompositeSection  # TODO: can just pass file names and do this initialization inside of rotor
    from towerse.tower import TowerWithpBEAM
    from commonse.environment import PowerWind, TowerSoil
    from commonse.utilities import print_vars

    turbine = TurbineSE()
    # print_vars(turbine, list_type=&#39;inputs&#39;, prefix=&#39;turbine&#39;)

    rotor = turbine.rotor
    nacelle = turbine.nacelle
    tower = turbine.tower
    tower.replace(&#39;wind1&#39;, PowerWind())
    tower.replace(&#39;wind2&#39;, PowerWind())
    # onshore (no waves)
    tower.replace(&#39;soil&#39;, TowerSoil())
    tower.replace(&#39;tower1&#39;, TowerWithpBEAM())
    tower.replace(&#39;tower2&#39;, TowerWithpBEAM())
</pre></div>
</div>
<p>All of the variables from the rotor need to be set.</p>
<div class="highlight-python"><div class="highlight"><pre>    # --- blade grid ---
    rotor.initial_aero_grid = np.array([0.02222276, 0.06666667, 0.11111057, 0.16666667, 0.23333333, 0.3, 0.36666667,
        0.43333333, 0.5, 0.56666667, 0.63333333, 0.7, 0.76666667, 0.83333333, 0.88888943, 0.93333333,
        0.97777724])  # (Array): initial aerodynamic grid on unit radius
    rotor.initial_str_grid = np.array([0.0, 0.00492790457512, 0.00652942887106, 0.00813095316699, 0.00983257273154,
        0.0114340970275, 0.0130356213234, 0.02222276, 0.024446481932, 0.026048006228, 0.06666667, 0.089508406455,
        0.11111057, 0.146462614229, 0.16666667, 0.195309105255, 0.23333333, 0.276686558545, 0.3, 0.333640766319,
        0.36666667, 0.400404310407, 0.43333333, 0.5, 0.520818918408, 0.56666667, 0.602196371696, 0.63333333,
        0.667358391486, 0.683573824984, 0.7, 0.73242031601, 0.76666667, 0.83333333, 0.88888943, 0.93333333, 0.97777724,
        1.0])  # (Array): initial structural grid on unit radius
    rotor.idx_cylinder_aero = 3  # (Int): first idx in r_aero_unit of non-cylindrical section, constant twist inboard of here
    rotor.idx_cylinder_str = 14  # (Int): first idx in r_str_unit of non-cylindrical section
    rotor.hubFraction = 0.025  # (Float): hub location as fraction of radius
    # ------------------

    # --- blade geometry ---
    rotor.r_aero = np.array([0.02222276, 0.06666667, 0.11111057, 0.2, 0.23333333, 0.3, 0.36666667, 0.43333333,
        0.5, 0.56666667, 0.63333333, 0.64, 0.7, 0.83333333, 0.88888943, 0.93333333,
        0.97777724])  # (Array): new aerodynamic grid on unit radius
    rotor.r_max_chord = 0.23577  # (Float): location of max chord on unit radius
    rotor.chord_sub = [3.2612, 4.5709, 3.3178, 1.4621]  # (Array, m): chord at control points. defined at hub, then at linearly spaced locations from r_max_chord to tip
    rotor.theta_sub = [13.2783, 7.46036, 2.89317, -0.0878099]  # (Array, deg): twist at control points.  defined at linearly spaced locations from r[idx_cylinder] to tip
    rotor.precurve_sub = [0.0, 0.0, 0.0]  # (Array, m): precurve at control points.  defined at same locations at chord, starting at 2nd control point (root must be zero precurve)
    rotor.delta_precurve_sub = [0.0, 0.0, 0.0]  # (Array, m): adjustment to precurve to account for curvature from loading
    rotor.sparT = [0.05, 0.047754, 0.045376, 0.031085, 0.0061398]  # (Array, m): spar cap thickness parameters
    rotor.teT = [0.1, 0.09569, 0.06569, 0.02569, 0.00569]  # (Array, m): trailing-edge thickness parameters
    rotor.bladeLength = 61.5  # (Float, m): blade length (if not precurved or swept) otherwise length of blade before curvature
    rotor.delta_bladeLength = 0.0  # (Float, m): adjustment to blade length to account for curvature from loading
    rotor.precone = 2.5  # (Float, deg): precone angle
    rotor.tilt = 5.0  # (Float, deg): shaft tilt
    rotor.yaw = 0.0  # (Float, deg): yaw error
    rotor.nBlades = 3  # (Int): number of blades
    # ------------------

    # --- airfoil files ---
    import rotorse
    basepath = os.path.join(os.path.dirname(rotorse.__file__), &#39;5MW_AFFiles&#39;)
    # basepath = os.path.join(os.path.dirname(os.path.realpath(__file__)), &#39;5MW_AFFiles&#39;)

    # load all airfoils
    airfoil_types = [0]*8
    airfoil_types[0] = os.path.join(basepath, &#39;Cylinder1.dat&#39;)
    airfoil_types[1] = os.path.join(basepath, &#39;Cylinder2.dat&#39;)
    airfoil_types[2] = os.path.join(basepath, &#39;DU40_A17.dat&#39;)
    airfoil_types[3] = os.path.join(basepath, &#39;DU35_A17.dat&#39;)
    airfoil_types[4] = os.path.join(basepath, &#39;DU30_A17.dat&#39;)
    airfoil_types[5] = os.path.join(basepath, &#39;DU25_A17.dat&#39;)
    airfoil_types[6] = os.path.join(basepath, &#39;DU21_A17.dat&#39;)
    airfoil_types[7] = os.path.join(basepath, &#39;NACA64_A17.dat&#39;)

    # place at appropriate radial stations
    af_idx = [0, 0, 1, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7, 7, 7, 7, 7]

    n = len(af_idx)
    af = [0]*n
    for i in range(n):
        af[i] = airfoil_types[af_idx[i]]
    rotor.airfoil_files = af  # (List): names of airfoil file
    # ----------------------

    # --- atmosphere ---
    rotor.rho = 1.225  # (Float, kg/m**3): density of air
    rotor.mu = 1.81206e-5  # (Float, kg/m/s): dynamic viscosity of air
    rotor.shearExp = 0.2  # (Float): shear exponent
    rotor.hubHt = 90.0  # (Float, m): hub height
    rotor.turbine_class = &#39;I&#39;  # (Enum): IEC turbine class
    rotor.turbulence_class = &#39;B&#39;  # (Enum): IEC turbulence class class
    rotor.cdf_reference_height_wind_speed = 90.0  # (Float): reference hub height for IEC wind speed (used in CDF calculation)
    rotor.g = 9.81  # (Float, m/s**2): acceleration of gravity
    # ----------------------

    # --- control ---
    rotor.control.Vin = 3.0  # (Float, m/s): cut-in wind speed
    rotor.control.Vout = 25.0  # (Float, m/s): cut-out wind speed
    #rotor.control.ratedPower = 5e6  # (Float, W): rated power
    turbine.machine_rating = 5e3 # (Float, kW): rated power
    rotor.control.minOmega = 0.0  # (Float, rpm): minimum allowed rotor rotation speed
    rotor.control.maxOmega = 12.0  # (Float, rpm): maximum allowed rotor rotation speed
    rotor.control.tsr = 7.55  # (Float): tip-speed ratio in Region 2 (should be optimized externally)
    rotor.control.pitch = 0.0  # (Float, deg): pitch angle in region 2 (and region 3 for fixed pitch machines)
    rotor.pitch_extreme = 0.0  # (Float, deg): worst-case pitch at survival wind condition
    rotor.azimuth_extreme = 0.0  # (Float, deg): worst-case azimuth at survival wind condition
    rotor.VfactorPC = 0.7  # (Float): fraction of rated speed at which the deflection is assumed to representative throughout the power curve calculation
    # ----------------------

    # --- aero and structural analysis options ---
    rotor.nSector = 4  # (Int): number of sectors to divide rotor face into in computing thrust and power
    rotor.npts_coarse_power_curve = 20  # (Int): number of points to evaluate aero analysis at
    rotor.npts_spline_power_curve = 200  # (Int): number of points to use in fitting spline to power curve
    rotor.AEP_loss_factor = 1.0  # (Float): availability and other losses (soiling, array, etc.)
    rotor.drivetrainType = &#39;geared&#39;  # (Enum)
    rotor.nF = 5  # (Int): number of natural frequencies to compute
    rotor.dynamic_amplication_tip_deflection = 1.35  # (Float): a dynamic amplification factor to adjust the static deflection calculation
    # ----------------------

    # --- materials and composite layup  ---
    basepath = os.path.join(os.path.dirname(rotorse.__file__), &#39;5MW_PrecompFiles&#39;)
    # basepath = os.path.join(os.path.dirname(os.path.realpath(__file__)), &#39;5MW_PrecompFiles&#39;)

    materials = Orthotropic2DMaterial.listFromPreCompFile(os.path.join(basepath, &#39;materials.inp&#39;))

    ncomp = len(rotor.initial_str_grid)
    upper = [0]*ncomp
    lower = [0]*ncomp
    webs = [0]*ncomp
    profile = [0]*ncomp

    rotor.leLoc = np.array([0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.498, 0.497, 0.465, 0.447, 0.43, 0.411,
        0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4,
        0.4, 0.4, 0.4, 0.4])    # (Array): array of leading-edge positions from a reference blade axis (usually blade pitch axis). locations are normalized by the local chord length. e.g. leLoc[i] = 0.2 means leading edge is 0.2*chord[i] from reference axis.  positive in -x direction for airfoil-aligned coordinate system
    rotor.sector_idx_strain_spar = [2]*ncomp  # (Array): index of sector for spar (PreComp definition of sector)
    rotor.sector_idx_strain_te = [3]*ncomp  # (Array): index of sector for trailing-edge (PreComp definition of sector)
    web1 = np.array([-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, 0.4114, 0.4102, 0.4094, 0.3876, 0.3755, 0.3639, 0.345, 0.3342, 0.3313, 0.3274, 0.323, 0.3206, 0.3172, 0.3138, 0.3104, 0.307, 0.3003, 0.2982, 0.2935, 0.2899, 0.2867, 0.2833, 0.2817, 0.2799, 0.2767, 0.2731, 0.2664, 0.2607, 0.2562, 0.1886, -1.0])
    web2 = np.array([-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, 0.5886, 0.5868, 0.5854, 0.5508, 0.5315, 0.5131, 0.4831, 0.4658, 0.4687, 0.4726, 0.477, 0.4794, 0.4828, 0.4862, 0.4896, 0.493, 0.4997, 0.5018, 0.5065, 0.5101, 0.5133, 0.5167, 0.5183, 0.5201, 0.5233, 0.5269, 0.5336, 0.5393, 0.5438, 0.6114, -1.0])
    web3 = np.array([-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0])
    rotor.chord_str_ref = np.array([3.2612, 3.3100915356, 3.32587052924, 3.34159388653, 3.35823798667, 3.37384375335,
        3.38939112914, 3.4774055542, 3.49839685, 3.51343645709, 3.87017220335, 4.04645623801, 4.19408216643,
         4.47641008477, 4.55844487985, 4.57383098262, 4.57285771934, 4.51914315648, 4.47677655262, 4.40075650022,
         4.31069949379, 4.20483735936, 4.08985563932, 3.82931757126, 3.74220276467, 3.54415796922, 3.38732428502,
         3.24931446473, 3.23421422609, 3.22701537997, 3.21972125648, 3.08979310611, 2.95152261813, 2.330753331,
         2.05553464181, 1.82577817774, 1.5860853279, 1.4621])  # (Array, m): chord distribution for reference section, thickness of structural layup scaled with reference thickness (fixed t/c for this case)

    for i in range(ncomp):

        webLoc = []
        if web1[i] != -1:
            webLoc.append(web1[i])
        if web2[i] != -1:
            webLoc.append(web2[i])
        if web3[i] != -1:
            webLoc.append(web3[i])

        upper[i], lower[i], webs[i] = CompositeSection.initFromPreCompLayupFile(os.path.join(basepath, &#39;layup_&#39; + str(i+1) + &#39;.inp&#39;), webLoc, materials)
        profile[i] = Profile.initFromPreCompFile(os.path.join(basepath, &#39;shape_&#39; + str(i+1) + &#39;.inp&#39;))

    rotor.materials = materials  # (List): list of all Orthotropic2DMaterial objects used in defining the geometry
    rotor.upperCS = upper  # (List): list of CompositeSection objections defining the properties for upper surface
    rotor.lowerCS = lower  # (List): list of CompositeSection objections defining the properties for lower surface
    rotor.websCS = webs  # (List): list of CompositeSection objections defining the properties for shear webs
    rotor.profile = profile  # (List): airfoil shape at each radial position
    # --------------------------------------


    # --- fatigue ---
    rotor.rstar_damage = np.array([0.000, 0.022, 0.067, 0.111, 0.167, 0.233, 0.300, 0.367, 0.433, 0.500,
        0.567, 0.633, 0.700, 0.767, 0.833, 0.889, 0.933, 0.978])  # (Array): nondimensional radial locations of damage equivalent moments
    rotor.Mxb_damage = 1e3*np.array([2.3743E+003, 2.0834E+003, 1.8108E+003, 1.5705E+003, 1.3104E+003,
        1.0488E+003, 8.2367E+002, 6.3407E+002, 4.7727E+002, 3.4804E+002, 2.4458E+002, 1.6339E+002,
        1.0252E+002, 5.7842E+001, 2.7349E+001, 1.1262E+001, 3.8549E+000, 4.4738E-001])  # (Array, N*m): damage equivalent moments about blade c.s. x-direction
    rotor.Myb_damage = 1e3*np.array([2.7732E+003, 2.8155E+003, 2.6004E+003, 2.3933E+003, 2.1371E+003,
        1.8459E+003, 1.5582E+003, 1.2896E+003, 1.0427E+003, 8.2015E+002, 6.2449E+002, 4.5229E+002,
        3.0658E+002, 1.8746E+002, 9.6475E+001, 4.2677E+001, 1.5409E+001, 1.8426E+000])  # (Array, N*m): damage equivalent moments about blade c.s. y-direction
    rotor.strain_ult_spar = 1.0e-2  # (Float): ultimate strain in spar cap
    rotor.strain_ult_te = 2500*1e-6 * 2   # (Float): uptimate strain in trailing-edge panels, note that I am putting a factor of two for the damage part only.
    rotor.eta_damage = 1.35*1.3*1.0  # (Float): safety factor for fatigue
    rotor.m_damage = 10.0  # (Float): slope of S-N curve for fatigue analysis
    rotor.N_damage = 365*24*3600*20.0  # (Float): number of cycles used in fatigue analysis  TODO: make function of rotation speed
    # ----------------
</pre></div>
</div>
<p>Most of the nacelle parameters need to be set.</p>
<div class="highlight-python"><div class="highlight"><pre>    nacelle.L_ms = 1.0  # (Float, m): main shaft length downwind of main bearing in low-speed shaft
    nacelle.L_mb = 2.5  # (Float, m): main shaft length in low-speed shaft

    nacelle.h0_front = 1.7  # (Float, m): height of Ibeam in bedplate front
    nacelle.h0_rear = 1.35  # (Float, m): height of Ibeam in bedplate rear

    turbine.generator_speed = 1173.7  # (Float, rpm)  # generator speed
    # TODO: sync with rotor drivetrainType variable
    nacelle.drivetrain_design = &#39;geared&#39;
    nacelle.crane = True  # (Bool): flag for presence of crane
    nacelle.bevel = 0  # (Int): Flag for the presence of a bevel stage - 1 if present, 0 if not
    nacelle.gear_configuration = &#39;eep&#39;  # (Str): tring that represents the configuration of the gearbox (stage number and types)

    nacelle.Np = [3, 3, 1]  # (Array): number of planets in each stage
    nacelle.ratio_type = &#39;optimal&#39;  # (Str): optimal or empirical stage ratios
    nacelle.shaft_type = &#39;normal&#39;  # (Str): normal or short shaft length
    #nacelle.shaft_angle = 5.0  # (Float, deg): Angle of the LSS inclindation with respect to the horizontal
    nacelle.shaft_ratio = 0.10  # (Float): Ratio of inner diameter to outer diameter.  Leave zero for solid LSS
    #nacelle.shrink_disc_mass = 1000.0  # (Float, kg): Mass of the shrink disc
    nacelle.mb1Type = &#39;CARB&#39;  # (Str): Main bearing type: CARB, TRB or SRB
    nacelle.mb2Type = &#39;SRB&#39;  # (Str): Second bearing type: CARB, TRB or SRB
    nacelle.yaw_motors_number = 8.0  # (Float): number of yaw motors
    nacelle.uptower_transformer = True
    nacelle.flange_length = 0.5 #m
    nacelle.gearbox_cm = 0.1
    nacelle.hss_length = 1.5
    nacelle.overhang = 5.0 #TODO - should come from turbine configuration level

    nacelle.check_fatigue = 0 #0 if no fatigue check, 1 if parameterized fatigue check, 2 if known loads inputs

    # TODO: should come from rotor (these are FAST outputs)
    nacelle.DrivetrainEfficiency = 0.95
    nacelle.rotor_bending_moment_x = 330770.0# Nm
    nacelle.rotor_bending_moment_y = -16665000.0 # Nm
    nacelle.rotor_bending_moment_z = 2896300.0 # Nm
    nacelle.rotor_force_x = 599610.0 # N
    nacelle.rotor_force_y = 186780.0 # N
    nacelle.rotor_force_z = -842710.0 # N

    #nacelle.h0_rear = 1.35 # only used in drive smooth
    #nacelle.h0_front = 1.7
</pre></div>
</div>
<p>Some tower parameters need to be set, including those which come from the configurable slots.  Loading conditions and mass properties are connected to the rotor and nacelle and do not need to be set by the user.</p>
<div class="highlight-python"><div class="highlight"><pre>    # --- geometry ---
    tower.z = [0.0, 0.5, 1.0]  # (Array): locations along unit tower, linear lofting between
    turbine.tower_d = [6.0, 4.935, 3.87]  # (Array, m): diameters along tower
    tower.t = [0.027*1.3, 0.023*1.3, 0.019*1.3]  # (Array, m): shell thickness at corresponding locations
    tower.n = [10, 10]  # (Array): number of finite elements between sections.  array length should be ``len(z)-1``
    tower.L_reinforced = 30.0  # (Float, m): distance along tower for reinforcements used in buckling calc
    tower.downwind = False  # (Bool): flag if rotor is downwind
    # ---------------

    # --- wind ---
    tower.wind_z0 = 0.0  # (Float, m): bottom of wind profile (height of ground/sea)
    tower.wind1.shearExp = 0.2
    tower.wind2.shearExp = 0.2
    # ---------------

    # --- soil ---
    tower.soil.rigid = 6*[True]
    # ---------------

    # --- safety factors ---
    tower.gamma_f = 1.35  # (Float): safety factor on loads
    tower.gamma_m = 1.3  # (Float): safety factor on materials
    tower.gamma_n = 1.0  # (Float): safety factor on consequence of failure
    tower.gamma_b = 1.1  # (Float): buckling safety factor
    # ---------------

    # --- fatigue ---
    tower.z_DEL = 1.0/87.6*np.array([0.000, 1.327, 3.982, 6.636, 9.291, 11.945, 14.600, 17.255, 19.909,
        22.564, 25.218, 27.873, 30.527, 33.182, 35.836, 38.491, 41.145, 43.800, 46.455, 49.109, 51.764,
        54.418, 57.073, 59.727, 62.382, 65.036, 67.691, 70.345, 73.000, 75.655, 78.309, 80.964, 83.618,
        86.273, 87.600])  # (Array): locations along unit tower for M_DEL
    tower.M_DEL = 1e3*np.array([8.2940E+003, 8.1518E+003, 7.8831E+003, 7.6099E+003, 7.3359E+003,
        7.0577E+003, 6.7821E+003, 6.5119E+003, 6.2391E+003, 5.9707E+003, 5.7070E+003, 5.4500E+003,
        5.2015E+003, 4.9588E+003, 4.7202E+003, 4.4884E+003, 4.2577E+003, 4.0246E+003, 3.7942E+003,
        3.5664E+003, 3.3406E+003, 3.1184E+003, 2.8977E+003, 2.6811E+003, 2.4719E+003, 2.2663E+003,
        2.0673E+003, 1.8769E+003, 1.7017E+003, 1.5479E+003, 1.4207E+003, 1.3304E+003, 1.2780E+003,
        1.2673E+003, 1.2761E+003])  # (Array, N*m): damage equivalent moments along tower
    tower.gamma_fatigue = 1.35*1.3*1.0  # (Float): total safety factor for fatigue
    tower.life = 20.0  # (Float): fatigue life of tower
    tower.m_SN = 4  # (Int): slope of S/N curve
    tower.DC = 80.0  # (Float): standard value of stress
    # ---------------

    # --- constraints ---
    tower.min_d_to_t = 120.0  # (Float): minimum allowable diameter to thickness ratio
    tower.min_taper = 0.4  # (Float): minimum allowable taper ratio from tower top to tower bottom
    # ---------------

    # --- material properties
    tower.sigma_y = 450000000.0  # (Float, N/m**2): yield stress
    tower.rho = 8500.0  # (Float, kg/m**3): material density
    tower.E = 2.1e+11  # (Float, N/m**2): material modulus of elasticity
    tower.G = 80800000000.0  # (Float, N/m**2): material shear modulus
    # ----------------
</pre></div>
</div>
<p>With the model defined we can now run it. All outputs of the subassemblies are available, as are two additional outputs related to the turbine geometry.  The parameter <tt class="docutils literal"><span class="pre">turbine.maxdeflection.max_tip_deflection</span></tt> gives the clearance between the undeflected blade shape and the tower.  It represents the maximum allowable tip deflection in the +x yaw c.s. (not including safety factors) before a tower strike.  The parameter <tt class="docutils literal"><span class="pre">turbine.maxdeflection.ground_clearance</span></tt> gives the distance between the blade tip at its bottom passage and the ground.</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="n">turbine</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">print</span> <span class="s">&#39;mass rotor blades (kg) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">rotor</span><span class="o">.</span><span class="n">mass_all_blades</span>
    <span class="k">print</span> <span class="s">&#39;mass hub system (kg) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">hub</span><span class="o">.</span><span class="n">hub_system_mass</span>
    <span class="k">print</span> <span class="s">&#39;mass nacelle (kg) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">nacelle</span><span class="o">.</span><span class="n">nacelle_mass</span>
    <span class="k">print</span> <span class="s">&#39;mass tower (kg) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">tower</span><span class="o">.</span><span class="n">mass</span>
    <span class="k">print</span> <span class="s">&#39;maximum tip deflection (m) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">maxdeflection</span><span class="o">.</span><span class="n">max_tip_deflection</span>
    <span class="k">print</span> <span class="s">&#39;ground clearance (m) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">maxdeflection</span><span class="o">.</span><span class="n">ground_clearance</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mass</span> <span class="n">rotor</span> <span class="n">blades</span> <span class="p">(</span><span class="n">kg</span><span class="p">)</span> <span class="o">=</span> <span class="mf">54674.7959412</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mass</span> <span class="n">hub</span> <span class="n">system</span> <span class="p">(</span><span class="n">kg</span><span class="p">)</span> <span class="o">=</span> <span class="mf">37118.3606357</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mass</span> <span class="n">nacelle</span> <span class="p">(</span><span class="n">kg</span><span class="p">)</span> <span class="o">=</span> <span class="mf">193805.649876</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mass</span> <span class="n">tower</span> <span class="p">(</span><span class="n">kg</span><span class="p">)</span> <span class="o">=</span> <span class="mf">358230.152841</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maximum</span> <span class="n">tip</span> <span class="n">deflection</span> <span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">=</span> <span class="mf">10.6526326093</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ground</span> <span class="n">clearance</span> <span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">=</span> <span class="mf">28.4361396283</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3. Tutorial</a><ul>
<li><a class="reference internal" href="#tutorial-for-wisdem-with-nrel-csm">3.1. Tutorial for WISDEM with NREL CSM</a></li>
<li><a class="reference internal" href="#tutorial-for-wisdem-with-nrel-csm-plus-ecn-offshore-opex-model">3.2. Tutorial for WISDEM with NREL CSM plus ECN Offshore OPEX Model</a></li>
<li><a class="reference internal" href="#tutorial-for-turbine-assembly">3.3. Tutorial for Turbine Assembly</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">2. Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="documentation.html"
                        title="next chapter">4. Documentation for WISDEM</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="documentation.html" title="4. Documentation for WISDEM"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="2. Installation"
             >previous</a> |</li>
        <li><a href="index.html">WISDEM 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, NREL.
      Last updated on Oct 05, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>