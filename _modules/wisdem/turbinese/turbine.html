<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>wisdem.turbinese.turbine &mdash; WISDEM 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/nrel.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="WISDEM 0.1.0 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../../../index.html">WISDEM 0.1.0 documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for wisdem.turbinese.turbine</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c"># encoding: utf-8</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">turbine.py</span>

<span class="sd">Created by Andrew Ning and Katherine Dykes on 2014-01-13.</span>
<span class="sd">Copyright (c) NREL. All rights reserved.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Assembly</span><span class="p">,</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.main.datatypes.api</span> <span class="kn">import</span> <span class="n">Float</span><span class="p">,</span> <span class="n">Array</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.drivers.api</span> <span class="kn">import</span> <span class="n">FixedPointIterator</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">rotorse.rotor</span> <span class="kn">import</span> <span class="n">RotorSE</span>
<span class="kn">from</span> <span class="nn">towerse.tower</span> <span class="kn">import</span> <span class="n">TowerSE</span>
<span class="kn">from</span> <span class="nn">drivewpact.drive</span> <span class="kn">import</span> <span class="n">DriveWPACT</span>
<span class="kn">from</span> <span class="nn">drivewpact.hub</span> <span class="kn">import</span> <span class="n">HubWPACT</span>
<span class="kn">from</span> <span class="nn">commonse.csystem</span> <span class="kn">import</span> <span class="n">DirectionVector</span>
<span class="kn">from</span> <span class="nn">commonse.utilities</span> <span class="kn">import</span> <span class="n">interp_with_deriv</span><span class="p">,</span> <span class="n">hstack</span><span class="p">,</span> <span class="n">vstack</span>
<span class="kn">from</span> <span class="nn">drivese.drive_smooth</span> <span class="kn">import</span> <span class="n">NacelleTS</span>
<span class="kn">from</span> <span class="nn">drivese.drive</span> <span class="kn">import</span> <span class="n">Drive4pt</span><span class="p">,</span> <span class="n">Drive3pt</span>
<span class="kn">from</span> <span class="nn">drivese.hub</span> <span class="kn">import</span> <span class="n">HubSE</span>


<span class="k">class</span> <span class="nc">MaxTipDeflection</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="n">Rtip</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">)</span>
    <span class="n">precurveTip</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">)</span>  <span class="c"># TODO: add gradients for precurveTip and presweepTip</span>
    <span class="n">presweepTip</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">)</span>
    <span class="n">precone</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;deg&#39;</span><span class="p">)</span>
    <span class="n">tilt</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;deg&#39;</span><span class="p">)</span>
    <span class="n">hub_tt</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;location of hub relative to tower-top in yaw-aligned c.s.&#39;</span><span class="p">)</span>
    <span class="n">tower_z</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">)</span>
    <span class="n">tower_d</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">)</span>
    <span class="n">towerHt</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">)</span>

    <span class="n">max_tip_deflection</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;clearance between undeflected blade and tower&#39;</span><span class="p">)</span>
    <span class="n">ground_clearance</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;distance between blade tip and ground&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c"># coordinates of blade tip in yaw c.s.</span>
        <span class="n">blade_yaw</span> <span class="o">=</span> <span class="n">DirectionVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">precurveTip</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">presweepTip</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Rtip</span><span class="p">)</span>\
            <span class="o">.</span><span class="n">bladeToAzimuth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">precone</span><span class="p">)</span><span class="o">.</span><span class="n">azimuthToHub</span><span class="p">(</span><span class="mf">180.0</span><span class="p">)</span><span class="o">.</span><span class="n">hubToYaw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tilt</span><span class="p">)</span>

        <span class="c"># find corresponding radius of tower</span>
        <span class="n">ztower</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">towerHt</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">hub_tt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">blade_yaw</span><span class="o">.</span><span class="n">z</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">towerHt</span>  <span class="c"># nondimensional location</span>
        <span class="c"># rtower = np.interp(ztower, self.tower_z, self.tower_d) / 2.0</span>
        <span class="n">dtower</span><span class="p">,</span> <span class="n">ddtower_dztower</span><span class="p">,</span> <span class="n">ddtower_dtowerz</span><span class="p">,</span> <span class="n">ddtower_dtowerd</span> <span class="o">=</span> <span class="n">interp_with_deriv</span><span class="p">(</span><span class="n">ztower</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tower_z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tower_d</span><span class="p">)</span>
        <span class="n">rtower</span> <span class="o">=</span> <span class="n">dtower</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drtower_dztower</span> <span class="o">=</span> <span class="n">ddtower_dztower</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drtower_dtowerz</span> <span class="o">=</span> <span class="n">ddtower_dtowerz</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drtower_dtowerd</span> <span class="o">=</span> <span class="n">ddtower_dtowerd</span> <span class="o">/</span> <span class="mf">2.0</span>

        <span class="c"># max deflection before strike</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">precone</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c"># upwind</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_tip_deflection</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">hub_tt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">blade_yaw</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">rtower</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_tip_deflection</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">hub_tt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">blade_yaw</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">rtower</span>
            <span class="c"># TODO: need to redo gradients for this case.</span>

        <span class="c"># ground clearance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ground_clearance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">towerHt</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">hub_tt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">blade_yaw</span><span class="o">.</span><span class="n">z</span>

        <span class="c"># save for derivs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blade_yaw</span> <span class="o">=</span> <span class="n">blade_yaw</span>


    <span class="k">def</span> <span class="nf">list_deriv_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">inputs</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Rtip&#39;</span><span class="p">,</span> <span class="s">&#39;precurveTip&#39;</span><span class="p">,</span> <span class="s">&#39;presweepTip&#39;</span><span class="p">,</span> <span class="s">&#39;precone&#39;</span><span class="p">,</span> <span class="s">&#39;tilt&#39;</span><span class="p">,</span> <span class="s">&#39;hub_tt&#39;</span><span class="p">,</span>
            <span class="s">&#39;tower_z&#39;</span><span class="p">,</span> <span class="s">&#39;tower_d&#39;</span><span class="p">,</span> <span class="s">&#39;towerHt&#39;</span><span class="p">)</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;max_tip_deflection&#39;</span><span class="p">,</span> <span class="s">&#39;ground_clearance&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span>

    <span class="k">def</span> <span class="nf">provideJ</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">dbyx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">blade_yaw</span><span class="o">.</span><span class="n">dx</span>
        <span class="c"># dbyy = self.blade_yaw.dy</span>
        <span class="n">dbyz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">blade_yaw</span><span class="o">.</span><span class="n">dz</span>

        <span class="c"># Rtip</span>
        <span class="n">drtower_dRtip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drtower_dztower</span> <span class="o">*</span> <span class="n">dbyz</span><span class="p">[</span><span class="s">&#39;dz&#39;</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">towerHt</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">precone</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dtd_dRtip</span> <span class="o">=</span> <span class="o">-</span><span class="n">dbyx</span><span class="p">[</span><span class="s">&#39;dz&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">drtower_dRtip</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dtd_dRtip</span> <span class="o">=</span> <span class="n">dbyx</span><span class="p">[</span><span class="s">&#39;dz&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">drtower_dRtip</span>
        <span class="n">dgc_dRtip</span> <span class="o">=</span> <span class="n">dbyz</span><span class="p">[</span><span class="s">&#39;dz&#39;</span><span class="p">]</span>

        <span class="c"># precurveTip</span>
        <span class="n">drtower_dprecurveTip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drtower_dztower</span> <span class="o">*</span> <span class="n">dbyz</span><span class="p">[</span><span class="s">&#39;dx&#39;</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">towerHt</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">precone</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dtd_dprecurveTip</span> <span class="o">=</span> <span class="o">-</span><span class="n">dbyx</span><span class="p">[</span><span class="s">&#39;dx&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">drtower_dprecurveTip</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dtd_dprecurveTip</span> <span class="o">=</span> <span class="n">dbyx</span><span class="p">[</span><span class="s">&#39;dx&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">drtower_dprecurveTip</span>
        <span class="n">dgc_dprecurveTip</span> <span class="o">=</span> <span class="n">dbyz</span><span class="p">[</span><span class="s">&#39;dx&#39;</span><span class="p">]</span>

        <span class="c"># presweep</span>
        <span class="n">drtower_dpresweepTip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drtower_dztower</span> <span class="o">*</span> <span class="n">dbyz</span><span class="p">[</span><span class="s">&#39;dy&#39;</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">towerHt</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">precone</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dtd_dpresweepTip</span> <span class="o">=</span> <span class="o">-</span><span class="n">dbyx</span><span class="p">[</span><span class="s">&#39;dy&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">drtower_dpresweepTip</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dtd_dpresweepTip</span> <span class="o">=</span> <span class="n">dbyx</span><span class="p">[</span><span class="s">&#39;dy&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">drtower_dpresweepTip</span>
        <span class="n">dgc_dpresweepTip</span> <span class="o">=</span> <span class="n">dbyz</span><span class="p">[</span><span class="s">&#39;dy&#39;</span><span class="p">]</span>


        <span class="c"># precone</span>
        <span class="n">drtower_dprecone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drtower_dztower</span> <span class="o">*</span> <span class="n">dbyz</span><span class="p">[</span><span class="s">&#39;dprecone&#39;</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">towerHt</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">precone</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dtd_dprecone</span> <span class="o">=</span> <span class="o">-</span><span class="n">dbyx</span><span class="p">[</span><span class="s">&#39;dprecone&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">drtower_dprecone</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dtd_dprecone</span> <span class="o">=</span> <span class="n">dbyx</span><span class="p">[</span><span class="s">&#39;dprecone&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">drtower_dprecone</span>
        <span class="n">dgc_dprecone</span> <span class="o">=</span> <span class="n">dbyz</span><span class="p">[</span><span class="s">&#39;dprecone&#39;</span><span class="p">]</span>

        <span class="c"># tilt</span>
        <span class="n">drtower_dtilt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drtower_dztower</span> <span class="o">*</span> <span class="n">dbyz</span><span class="p">[</span><span class="s">&#39;dtilt&#39;</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">towerHt</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">precone</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dtd_dtilt</span> <span class="o">=</span> <span class="o">-</span><span class="n">dbyx</span><span class="p">[</span><span class="s">&#39;dtilt&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">drtower_dtilt</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dtd_dtilt</span> <span class="o">=</span> <span class="n">dbyx</span><span class="p">[</span><span class="s">&#39;dtilt&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">drtower_dtilt</span>
        <span class="n">dgc_dtilt</span> <span class="o">=</span> <span class="n">dbyz</span><span class="p">[</span><span class="s">&#39;dtilt&#39;</span><span class="p">]</span>

        <span class="c"># hubtt</span>
        <span class="n">drtower_dhubtt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drtower_dztower</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">towerHt</span><span class="p">])</span>
        <span class="n">dtd_dhubtt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span> <span class="o">-</span> <span class="n">drtower_dhubtt</span>
        <span class="n">dgc_dhubtt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>

        <span class="c"># tower_z</span>
        <span class="n">dtd_dtowerz</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">drtower_dtowerz</span>
        <span class="n">dgc_dtowerz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tower_z</span><span class="p">)</span>

        <span class="c"># tower_d</span>
        <span class="n">dtd_dtowerd</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">drtower_dtowerd</span>
        <span class="n">dgc_dtowerd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tower_d</span><span class="p">)</span>

        <span class="c"># towerHt</span>
        <span class="n">drtower_dtowerHt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drtower_dztower</span> <span class="o">*</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hub_tt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">blade_yaw</span><span class="o">.</span><span class="n">z</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">towerHt</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">dtd_dtowerHt</span> <span class="o">=</span> <span class="o">-</span><span class="n">drtower_dtowerHt</span>
        <span class="n">dgc_dtowerHt</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="n">dtd</span> <span class="o">=</span> <span class="n">hstack</span><span class="p">([</span><span class="n">dtd_dRtip</span><span class="p">,</span> <span class="n">dtd_dprecurveTip</span><span class="p">,</span> <span class="n">dtd_dpresweepTip</span><span class="p">,</span> <span class="n">dtd_dprecone</span><span class="p">,</span> <span class="n">dtd_dtilt</span><span class="p">,</span>
            <span class="n">dtd_dhubtt</span><span class="p">,</span> <span class="n">dtd_dtowerz</span><span class="p">,</span> <span class="n">dtd_dtowerd</span><span class="p">,</span> <span class="n">dtd_dtowerHt</span><span class="p">])</span>
        <span class="n">dgc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([[</span><span class="n">dgc_dRtip</span><span class="p">],</span> <span class="p">[</span><span class="n">dgc_dprecurveTip</span><span class="p">],</span> <span class="p">[</span><span class="n">dgc_dpresweepTip</span><span class="p">],</span> <span class="p">[</span><span class="n">dgc_dprecone</span><span class="p">],</span>
            <span class="p">[</span><span class="n">dgc_dtilt</span><span class="p">],</span> <span class="n">dgc_dhubtt</span><span class="p">,</span> <span class="n">dgc_dtowerz</span><span class="p">,</span> <span class="n">dgc_dtowerd</span><span class="p">,</span> <span class="p">[</span><span class="n">dgc_dtowerHt</span><span class="p">]])</span>

        <span class="n">J</span> <span class="o">=</span> <span class="n">vstack</span><span class="p">([</span><span class="n">dtd</span><span class="p">,</span> <span class="n">dgc</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">J</span>




<div class="viewcode-block" id="configure_turbine"><a class="viewcode-back" href="../../../generated/wisdem.turbinese.turbine.configure_turbine.html#wisdem.turbinese.turbine.configure_turbine">[docs]</a><span class="k">def</span> <span class="nf">configure_turbine</span><span class="p">(</span><span class="n">assembly</span><span class="p">,</span> <span class="n">with_new_nacelle</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">flexible_blade</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">with_3pt_drive</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;a stand-alone configure method to allow for flatter assemblies</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    assembly : Assembly</span>
<span class="sd">        an openmdao assembly to be configured</span>
<span class="sd">    with_new_nacelle : bool</span>
<span class="sd">        False uses the default implementation, True uses an experimental implementation designed</span>
<span class="sd">        to smooth out discontinities making in amenable for gradient-based optimization</span>
<span class="sd">    flexible_blade : bool</span>
<span class="sd">        if True, internally solves the coupled aero/structural deflection using fixed point iteration.</span>
<span class="sd">        Note that the coupling is currently only in the flapwise deflection, and is primarily</span>
<span class="sd">        only important for highly flexible blades.  If False, the aero loads are passed</span>
<span class="sd">        to the structure but there is no further iteration.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;rotor&#39;</span><span class="p">,</span> <span class="n">RotorSE</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">with_new_nacelle</span><span class="p">:</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;hub&#39;</span><span class="p">,</span><span class="n">HubSE</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">with_3pt_drive</span><span class="p">:</span>
            <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;nacelle&#39;</span><span class="p">,</span> <span class="n">Drive3pt</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
        	  <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;nacelle&#39;</span><span class="p">,</span> <span class="n">Drive4pt</span><span class="p">())</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;nacelle&#39;</span><span class="p">,</span> <span class="n">DriveWPACT</span><span class="p">())</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;hub&#39;</span><span class="p">,</span> <span class="n">HubWPACT</span><span class="p">())</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;tower&#39;</span><span class="p">,</span> <span class="n">TowerSE</span><span class="p">())</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;maxdeflection&#39;</span><span class="p">,</span> <span class="n">MaxTipDeflection</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">flexible_blade</span><span class="p">:</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;fpi&#39;</span><span class="p">,</span> <span class="n">FixedPointIterator</span><span class="p">())</span>

        <span class="n">assembly</span><span class="o">.</span><span class="n">fpi</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&#39;rotor&#39;</span><span class="p">])</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">fpi</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;rotor.delta_precurve_sub&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=-</span><span class="mf">1.e99</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1.e99</span><span class="p">)</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">fpi</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;rotor.delta_bladeLength&#39;</span><span class="p">,</span> <span class="n">low</span><span class="o">=-</span><span class="mf">1.e99</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1.e99</span><span class="p">)</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">fpi</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s">&#39;rotor.delta_precurve_sub = rotor.delta_precurve_sub_out&#39;</span><span class="p">)</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">fpi</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s">&#39;rotor.delta_bladeLength = rotor.delta_bladeLength_out&#39;</span><span class="p">)</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">fpi</span><span class="o">.</span><span class="n">max_iteration</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">fpi</span><span class="o">.</span><span class="n">tolerance</span> <span class="o">=</span> <span class="mf">1e-8</span>

        <span class="n">assembly</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&#39;fpi&#39;</span><span class="p">])</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&#39;rotor&#39;</span><span class="p">])</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&#39;hub&#39;</span><span class="p">,</span> <span class="s">&#39;nacelle&#39;</span><span class="p">,</span> <span class="s">&#39;tower&#39;</span><span class="p">,</span> <span class="s">&#39;maxdeflection&#39;</span><span class="p">])</span>

    <span class="c"># TODO: rotor drivetrain design should be connected to nacelle drivetrain design</span>

    <span class="c"># inputs #TODO: awkward adding class inputs in configuration step</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;tower_d&#39;</span><span class="p">,</span> <span class="n">Array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;diameters along tower&#39;</span><span class="p">))</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;generator_speed&#39;</span><span class="p">,</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;rpm&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;generator speed&#39;</span><span class="p">))</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;machine_rating&#39;</span><span class="p">,</span> <span class="n">Float</span><span class="p">(</span><span class="mf">5000.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW&#39;</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;machine rated power&#39;</span><span class="p">))</span>

    <span class="c"># connections to rotor</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;machine_rating&#39;</span><span class="p">,</span><span class="s">&#39;rotor.control.ratedPower&#39;</span><span class="p">)</span>

    <span class="c"># connections to hub</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.mass_one_blade&#39;</span><span class="p">,</span> <span class="s">&#39;hub.blade_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.root_bending_moment&#39;</span><span class="p">,</span> <span class="s">&#39;hub.rotor_bending_moment&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.diameter&#39;</span><span class="p">,</span> <span class="s">&#39;hub.rotor_diameter&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.hub_diameter&#39;</span><span class="p">,</span> <span class="s">&#39;hub.blade_root_diameter&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.nBlades&#39;</span><span class="p">,</span> <span class="s">&#39;hub.blade_number&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">with_new_nacelle</span><span class="p">:</span>
    	  <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.MB1_location&#39;</span><span class="p">,</span><span class="s">&#39;hub.MB1_location&#39;</span><span class="p">)</span>
    	  <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.tilt&#39;</span><span class="p">,</span><span class="s">&#39;hub.gamma&#39;</span><span class="p">)</span>
    	  <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.L_rb&#39;</span><span class="p">,</span><span class="s">&#39;hub.L_rb&#39;</span><span class="p">)</span>

    <span class="c"># connections to nacelle #TODO: fatigue option variables</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.diameter&#39;</span><span class="p">,</span> <span class="s">&#39;nacelle.rotor_diameter&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">with_new_nacelle</span><span class="p">:</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.mass_all_blades + hub.hub_system_mass&#39;</span><span class="p">,</span> <span class="s">&#39;nacelle.rotor_mass&#39;</span><span class="p">)</span> <span class="c">#DODO: circular dependency if using DriveSE (nacelle csm --&gt; hub, hub mass --&gt; nacelle)</span>
    <span class="k">if</span> <span class="n">with_new_nacelle</span><span class="p">:</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.nBlades&#39;</span><span class="p">,</span><span class="s">&#39;nacelle.blade_number&#39;</span><span class="p">)</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.tilt&#39;</span><span class="p">,</span><span class="s">&#39;nacelle.shaft_angle&#39;</span><span class="p">)</span>
        <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;333.3 * machine_rating / 1000.0&#39;</span><span class="p">,</span><span class="s">&#39;nacelle.shrink_disc_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;1.5 * rotor.ratedConditions.Q&#39;</span><span class="p">,</span> <span class="s">&#39;nacelle.rotor_torque&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.ratedConditions.T&#39;</span><span class="p">,</span> <span class="s">&#39;nacelle.rotor_thrust&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.ratedConditions.Omega&#39;</span><span class="p">,</span> <span class="s">&#39;nacelle.rotor_speed&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;machine_rating&#39;</span><span class="p">,</span> <span class="s">&#39;nacelle.machine_rating&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.root_bending_moment&#39;</span><span class="p">,</span> <span class="s">&#39;nacelle.rotor_bending_moment&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;generator_speed/rotor.ratedConditions.Omega&#39;</span><span class="p">,</span> <span class="s">&#39;nacelle.gear_ratio&#39;</span><span class="p">)</span>
    <span class="sd">&#39;&#39;&#39;if  with_new_nacelle:</span>
<span class="sd">        assembly.connect(&#39;rotor.g&#39;, &#39;nacelle.g&#39;)&#39;&#39;&#39;</span> <span class="c"># Only drive smooth taking g from rotor; TODO: update when drive_smooth is updated</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;tower_d[-1]&#39;</span><span class="p">,</span> <span class="s">&#39;nacelle.tower_top_diameter&#39;</span><span class="p">)</span>  <span class="c"># OpenMDAO circular dependency issue</span>


    <span class="c"># connections to tower</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;tower_d&#39;</span><span class="p">,</span> <span class="s">&#39;tower.d&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.rho&#39;</span><span class="p">,</span> <span class="s">&#39;tower.wind_rho&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.mu&#39;</span><span class="p">,</span> <span class="s">&#39;tower.wind_mu&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.ratedConditions.V&#39;</span><span class="p">,</span> <span class="s">&#39;tower.wind_Uref1&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.V_extreme&#39;</span><span class="p">,</span> <span class="s">&#39;tower.wind_Uref2&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.hubHt&#39;</span><span class="p">,</span> <span class="s">&#39;tower.wind_zref&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.yaw&#39;</span><span class="p">,</span> <span class="s">&#39;tower.yaw&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.tilt&#39;</span><span class="p">,</span> <span class="s">&#39;tower.tilt&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.g&#39;</span><span class="p">,</span> <span class="s">&#39;tower.g&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.mass_all_blades&#39;</span><span class="p">,</span> <span class="s">&#39;tower.blades_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.I_all_blades&#39;</span><span class="p">,</span> <span class="s">&#39;tower.blades_I&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;hub.hub_system_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tower.hub_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;hub.hub_system_cm&#39;</span><span class="p">,</span> <span class="s">&#39;tower.hub_cm&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;hub.hub_system_I&#39;</span><span class="p">,</span> <span class="s">&#39;tower.hub_I&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.nacelle_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tower.nac_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.nacelle_cm&#39;</span><span class="p">,</span> <span class="s">&#39;tower.nac_cm&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.nacelle_I&#39;</span><span class="p">,</span> <span class="s">&#39;tower.nac_I&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;1.8 * rotor.ratedConditions.T&#39;</span><span class="p">,</span> <span class="s">&#39;tower.rotorF1[0]&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.ratedConditions.Q&#39;</span><span class="p">,</span> <span class="s">&#39;tower.rotorM1[0]&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.T_extreme&#39;</span><span class="p">,</span> <span class="s">&#39;tower.rotorF2[0]&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.Q_extreme&#39;</span><span class="p">,</span> <span class="s">&#39;tower.rotorM2[0]&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.hubHt - nacelle.nacelle_cm[2]&#39;</span><span class="p">,</span> <span class="s">&#39;tower.towerHeight&#39;</span><span class="p">)</span>

    <span class="c"># connections to maxdeflection</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.Rtip&#39;</span><span class="p">,</span> <span class="s">&#39;maxdeflection.Rtip&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.precurveTip&#39;</span><span class="p">,</span> <span class="s">&#39;maxdeflection.precurveTip&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.presweepTip&#39;</span><span class="p">,</span> <span class="s">&#39;maxdeflection.presweepTip&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.precone&#39;</span><span class="p">,</span> <span class="s">&#39;maxdeflection.precone&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.tilt&#39;</span><span class="p">,</span> <span class="s">&#39;maxdeflection.tilt&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;hub.hub_system_cm&#39;</span><span class="p">,</span> <span class="s">&#39;maxdeflection.hub_tt&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;tower.z&#39;</span><span class="p">,</span> <span class="s">&#39;maxdeflection.tower_z&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;tower_d&#39;</span><span class="p">,</span> <span class="s">&#39;maxdeflection.tower_d&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;tower.towerHeight&#39;</span><span class="p">,</span> <span class="s">&#39;maxdeflection.towerHt&#39;</span><span class="p">)</span>


</div>
<span class="k">class</span> <span class="nc">TurbineSE</span><span class="p">(</span><span class="n">Assembly</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">configure_turbine</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="c"># === setup ===</span>
    <span class="kn">import</span> <span class="nn">os</span>
    <span class="kn">from</span> <span class="nn">rotorse.precomp</span> <span class="kn">import</span> <span class="n">Profile</span><span class="p">,</span> <span class="n">Orthotropic2DMaterial</span><span class="p">,</span> <span class="n">CompositeSection</span>  <span class="c"># TODO: can just pass file names and do this initialization inside of rotor</span>
    <span class="kn">from</span> <span class="nn">towerse.tower</span> <span class="kn">import</span> <span class="n">TowerWithpBEAM</span>
    <span class="kn">from</span> <span class="nn">commonse.environment</span> <span class="kn">import</span> <span class="n">PowerWind</span><span class="p">,</span> <span class="n">TowerSoil</span>
    <span class="kn">from</span> <span class="nn">commonse.utilities</span> <span class="kn">import</span> <span class="n">print_vars</span>

    <span class="n">turbine</span> <span class="o">=</span> <span class="n">TurbineSE</span><span class="p">()</span>
    <span class="c"># print_vars(turbine, list_type=&#39;inputs&#39;, prefix=&#39;turbine&#39;)</span>

    <span class="n">rotor</span> <span class="o">=</span> <span class="n">turbine</span><span class="o">.</span><span class="n">rotor</span>
    <span class="n">nacelle</span> <span class="o">=</span> <span class="n">turbine</span><span class="o">.</span><span class="n">nacelle</span>
    <span class="n">tower</span> <span class="o">=</span> <span class="n">turbine</span><span class="o">.</span><span class="n">tower</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;wind1&#39;</span><span class="p">,</span> <span class="n">PowerWind</span><span class="p">())</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;wind2&#39;</span><span class="p">,</span> <span class="n">PowerWind</span><span class="p">())</span>
    <span class="c"># onshore (no waves)</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;soil&#39;</span><span class="p">,</span> <span class="n">TowerSoil</span><span class="p">())</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;tower1&#39;</span><span class="p">,</span> <span class="n">TowerWithpBEAM</span><span class="p">())</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;tower2&#39;</span><span class="p">,</span> <span class="n">TowerWithpBEAM</span><span class="p">())</span>

    <span class="c"># =================</span>

    <span class="c"># === rotor ===</span>
    <span class="c"># --- blade grid ---</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">initial_aero_grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.02222276</span><span class="p">,</span> <span class="mf">0.06666667</span><span class="p">,</span> <span class="mf">0.11111057</span><span class="p">,</span> <span class="mf">0.16666667</span><span class="p">,</span> <span class="mf">0.23333333</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.36666667</span><span class="p">,</span>
        <span class="mf">0.43333333</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.56666667</span><span class="p">,</span> <span class="mf">0.63333333</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.76666667</span><span class="p">,</span> <span class="mf">0.83333333</span><span class="p">,</span> <span class="mf">0.88888943</span><span class="p">,</span> <span class="mf">0.93333333</span><span class="p">,</span>
        <span class="mf">0.97777724</span><span class="p">])</span>  <span class="c"># (Array): initial aerodynamic grid on unit radius</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">initial_str_grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.00492790457512</span><span class="p">,</span> <span class="mf">0.00652942887106</span><span class="p">,</span> <span class="mf">0.00813095316699</span><span class="p">,</span> <span class="mf">0.00983257273154</span><span class="p">,</span>
        <span class="mf">0.0114340970275</span><span class="p">,</span> <span class="mf">0.0130356213234</span><span class="p">,</span> <span class="mf">0.02222276</span><span class="p">,</span> <span class="mf">0.024446481932</span><span class="p">,</span> <span class="mf">0.026048006228</span><span class="p">,</span> <span class="mf">0.06666667</span><span class="p">,</span> <span class="mf">0.089508406455</span><span class="p">,</span>
        <span class="mf">0.11111057</span><span class="p">,</span> <span class="mf">0.146462614229</span><span class="p">,</span> <span class="mf">0.16666667</span><span class="p">,</span> <span class="mf">0.195309105255</span><span class="p">,</span> <span class="mf">0.23333333</span><span class="p">,</span> <span class="mf">0.276686558545</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.333640766319</span><span class="p">,</span>
        <span class="mf">0.36666667</span><span class="p">,</span> <span class="mf">0.400404310407</span><span class="p">,</span> <span class="mf">0.43333333</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.520818918408</span><span class="p">,</span> <span class="mf">0.56666667</span><span class="p">,</span> <span class="mf">0.602196371696</span><span class="p">,</span> <span class="mf">0.63333333</span><span class="p">,</span>
        <span class="mf">0.667358391486</span><span class="p">,</span> <span class="mf">0.683573824984</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.73242031601</span><span class="p">,</span> <span class="mf">0.76666667</span><span class="p">,</span> <span class="mf">0.83333333</span><span class="p">,</span> <span class="mf">0.88888943</span><span class="p">,</span> <span class="mf">0.93333333</span><span class="p">,</span> <span class="mf">0.97777724</span><span class="p">,</span>
        <span class="mf">1.0</span><span class="p">])</span>  <span class="c"># (Array): initial structural grid on unit radius</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">idx_cylinder_aero</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c"># (Int): first idx in r_aero_unit of non-cylindrical section, constant twist inboard of here</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">idx_cylinder_str</span> <span class="o">=</span> <span class="mi">14</span>  <span class="c"># (Int): first idx in r_str_unit of non-cylindrical section</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">hubFraction</span> <span class="o">=</span> <span class="mf">0.025</span>  <span class="c"># (Float): hub location as fraction of radius</span>
    <span class="c"># ------------------</span>

    <span class="c"># --- blade geometry ---</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">r_aero</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.02222276</span><span class="p">,</span> <span class="mf">0.06666667</span><span class="p">,</span> <span class="mf">0.11111057</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.23333333</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.36666667</span><span class="p">,</span> <span class="mf">0.43333333</span><span class="p">,</span>
        <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.56666667</span><span class="p">,</span> <span class="mf">0.63333333</span><span class="p">,</span> <span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.83333333</span><span class="p">,</span> <span class="mf">0.88888943</span><span class="p">,</span> <span class="mf">0.93333333</span><span class="p">,</span>
        <span class="mf">0.97777724</span><span class="p">])</span>  <span class="c"># (Array): new aerodynamic grid on unit radius</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">r_max_chord</span> <span class="o">=</span> <span class="mf">0.23577</span>  <span class="c"># (Float): location of max chord on unit radius</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">chord_sub</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.2612</span><span class="p">,</span> <span class="mf">4.5709</span><span class="p">,</span> <span class="mf">3.3178</span><span class="p">,</span> <span class="mf">1.4621</span><span class="p">]</span>  <span class="c"># (Array, m): chord at control points. defined at hub, then at linearly spaced locations from r_max_chord to tip</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">theta_sub</span> <span class="o">=</span> <span class="p">[</span><span class="mf">13.2783</span><span class="p">,</span> <span class="mf">7.46036</span><span class="p">,</span> <span class="mf">2.89317</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.0878099</span><span class="p">]</span>  <span class="c"># (Array, deg): twist at control points.  defined at linearly spaced locations from r[idx_cylinder] to tip</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">precurve_sub</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>  <span class="c"># (Array, m): precurve at control points.  defined at same locations at chord, starting at 2nd control point (root must be zero precurve)</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">delta_precurve_sub</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>  <span class="c"># (Array, m): adjustment to precurve to account for curvature from loading</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">sparT</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.047754</span><span class="p">,</span> <span class="mf">0.045376</span><span class="p">,</span> <span class="mf">0.031085</span><span class="p">,</span> <span class="mf">0.0061398</span><span class="p">]</span>  <span class="c"># (Array, m): spar cap thickness parameters</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">teT</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.09569</span><span class="p">,</span> <span class="mf">0.06569</span><span class="p">,</span> <span class="mf">0.02569</span><span class="p">,</span> <span class="mf">0.00569</span><span class="p">]</span>  <span class="c"># (Array, m): trailing-edge thickness parameters</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">bladeLength</span> <span class="o">=</span> <span class="mf">61.5</span>  <span class="c"># (Float, m): blade length (if not precurved or swept) otherwise length of blade before curvature</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">delta_bladeLength</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c"># (Float, m): adjustment to blade length to account for curvature from loading</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">precone</span> <span class="o">=</span> <span class="mf">2.5</span>  <span class="c"># (Float, deg): precone angle</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">tilt</span> <span class="o">=</span> <span class="mf">5.0</span>  <span class="c"># (Float, deg): shaft tilt</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">yaw</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c"># (Float, deg): yaw error</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">nBlades</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c"># (Int): number of blades</span>
    <span class="c"># ------------------</span>

    <span class="c"># --- airfoil files ---</span>
    <span class="kn">import</span> <span class="nn">rotorse</span>
    <span class="n">basepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">rotorse</span><span class="o">.</span><span class="n">__file__</span><span class="p">),</span> <span class="s">&#39;5MW_AFFiles&#39;</span><span class="p">)</span>
    <span class="c"># basepath = os.path.join(os.path.dirname(os.path.realpath(__file__)), &#39;5MW_AFFiles&#39;)</span>

    <span class="c"># load all airfoils</span>
    <span class="n">airfoil_types</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">8</span>
    <span class="n">airfoil_types</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;Cylinder1.dat&#39;</span><span class="p">)</span>
    <span class="n">airfoil_types</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;Cylinder2.dat&#39;</span><span class="p">)</span>
    <span class="n">airfoil_types</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;DU40_A17.dat&#39;</span><span class="p">)</span>
    <span class="n">airfoil_types</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;DU35_A17.dat&#39;</span><span class="p">)</span>
    <span class="n">airfoil_types</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;DU30_A17.dat&#39;</span><span class="p">)</span>
    <span class="n">airfoil_types</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;DU25_A17.dat&#39;</span><span class="p">)</span>
    <span class="n">airfoil_types</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;DU21_A17.dat&#39;</span><span class="p">)</span>
    <span class="n">airfoil_types</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;NACA64_A17.dat&#39;</span><span class="p">)</span>

    <span class="c"># place at appropriate radial stations</span>
    <span class="n">af_idx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">af_idx</span><span class="p">)</span>
    <span class="n">af</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">n</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">af</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">airfoil_types</span><span class="p">[</span><span class="n">af_idx</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">airfoil_files</span> <span class="o">=</span> <span class="n">af</span>  <span class="c"># (List): names of airfoil file</span>
    <span class="c"># ----------------------</span>

    <span class="c"># --- atmosphere ---</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">rho</span> <span class="o">=</span> <span class="mf">1.225</span>  <span class="c"># (Float, kg/m**3): density of air</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">mu</span> <span class="o">=</span> <span class="mf">1.81206e-5</span>  <span class="c"># (Float, kg/m/s): dynamic viscosity of air</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">shearExp</span> <span class="o">=</span> <span class="mf">0.2</span>  <span class="c"># (Float): shear exponent</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">hubHt</span> <span class="o">=</span> <span class="mf">90.0</span>  <span class="c"># (Float, m): hub height</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">turbine_class</span> <span class="o">=</span> <span class="s">&#39;I&#39;</span>  <span class="c"># (Enum): IEC turbine class</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">turbulence_class</span> <span class="o">=</span> <span class="s">&#39;B&#39;</span>  <span class="c"># (Enum): IEC turbulence class class</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">cdf_reference_height_wind_speed</span> <span class="o">=</span> <span class="mf">90.0</span>  <span class="c"># (Float): reference hub height for IEC wind speed (used in CDF calculation)</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">g</span> <span class="o">=</span> <span class="mf">9.81</span>  <span class="c"># (Float, m/s**2): acceleration of gravity</span>
    <span class="c"># ----------------------</span>

    <span class="c"># --- control ---</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">Vin</span> <span class="o">=</span> <span class="mf">3.0</span>  <span class="c"># (Float, m/s): cut-in wind speed</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">Vout</span> <span class="o">=</span> <span class="mf">25.0</span>  <span class="c"># (Float, m/s): cut-out wind speed</span>
    <span class="c">#rotor.control.ratedPower = 5e6  # (Float, W): rated power</span>
    <span class="n">turbine</span><span class="o">.</span><span class="n">machine_rating</span> <span class="o">=</span> <span class="mf">5e3</span> <span class="c"># (Float, kW): rated power</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">minOmega</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c"># (Float, rpm): minimum allowed rotor rotation speed</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">maxOmega</span> <span class="o">=</span> <span class="mf">12.0</span>  <span class="c"># (Float, rpm): maximum allowed rotor rotation speed</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">tsr</span> <span class="o">=</span> <span class="mf">7.55</span>  <span class="c"># (Float): tip-speed ratio in Region 2 (should be optimized externally)</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">pitch</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c"># (Float, deg): pitch angle in region 2 (and region 3 for fixed pitch machines)</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">pitch_extreme</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c"># (Float, deg): worst-case pitch at survival wind condition</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">azimuth_extreme</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c"># (Float, deg): worst-case azimuth at survival wind condition</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">VfactorPC</span> <span class="o">=</span> <span class="mf">0.7</span>  <span class="c"># (Float): fraction of rated speed at which the deflection is assumed to representative throughout the power curve calculation</span>
    <span class="c"># ----------------------</span>

    <span class="c"># --- aero and structural analysis options ---</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">nSector</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c"># (Int): number of sectors to divide rotor face into in computing thrust and power</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">npts_coarse_power_curve</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c"># (Int): number of points to evaluate aero analysis at</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">npts_spline_power_curve</span> <span class="o">=</span> <span class="mi">200</span>  <span class="c"># (Int): number of points to use in fitting spline to power curve</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">AEP_loss_factor</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c"># (Float): availability and other losses (soiling, array, etc.)</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">drivetrainType</span> <span class="o">=</span> <span class="s">&#39;geared&#39;</span>  <span class="c"># (Enum)</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">nF</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c"># (Int): number of natural frequencies to compute</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">dynamic_amplication_tip_deflection</span> <span class="o">=</span> <span class="mf">1.35</span>  <span class="c"># (Float): a dynamic amplification factor to adjust the static deflection calculation</span>
    <span class="c"># ----------------------</span>

    <span class="c"># --- materials and composite layup  ---</span>
    <span class="n">basepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">rotorse</span><span class="o">.</span><span class="n">__file__</span><span class="p">),</span> <span class="s">&#39;5MW_PrecompFiles&#39;</span><span class="p">)</span>
    <span class="c"># basepath = os.path.join(os.path.dirname(os.path.realpath(__file__)), &#39;5MW_PrecompFiles&#39;)</span>

    <span class="n">materials</span> <span class="o">=</span> <span class="n">Orthotropic2DMaterial</span><span class="o">.</span><span class="n">listFromPreCompFile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;materials.inp&#39;</span><span class="p">))</span>

    <span class="n">ncomp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rotor</span><span class="o">.</span><span class="n">initial_str_grid</span><span class="p">)</span>
    <span class="n">upper</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">ncomp</span>
    <span class="n">lower</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">ncomp</span>
    <span class="n">webs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">ncomp</span>
    <span class="n">profile</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">ncomp</span>

    <span class="n">rotor</span><span class="o">.</span><span class="n">leLoc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.498</span><span class="p">,</span> <span class="mf">0.497</span><span class="p">,</span> <span class="mf">0.465</span><span class="p">,</span> <span class="mf">0.447</span><span class="p">,</span> <span class="mf">0.43</span><span class="p">,</span> <span class="mf">0.411</span><span class="p">,</span>
        <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span>
        <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">])</span>    <span class="c"># (Array): array of leading-edge positions from a reference blade axis (usually blade pitch axis). locations are normalized by the local chord length. e.g. leLoc[i] = 0.2 means leading edge is 0.2*chord[i] from reference axis.  positive in -x direction for airfoil-aligned coordinate system</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">sector_idx_strain_spar</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">ncomp</span>  <span class="c"># (Array): index of sector for spar (PreComp definition of sector)</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">sector_idx_strain_te</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="n">ncomp</span>  <span class="c"># (Array): index of sector for trailing-edge (PreComp definition of sector)</span>
    <span class="n">web1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.4114</span><span class="p">,</span> <span class="mf">0.4102</span><span class="p">,</span> <span class="mf">0.4094</span><span class="p">,</span> <span class="mf">0.3876</span><span class="p">,</span> <span class="mf">0.3755</span><span class="p">,</span> <span class="mf">0.3639</span><span class="p">,</span> <span class="mf">0.345</span><span class="p">,</span> <span class="mf">0.3342</span><span class="p">,</span> <span class="mf">0.3313</span><span class="p">,</span> <span class="mf">0.3274</span><span class="p">,</span> <span class="mf">0.323</span><span class="p">,</span> <span class="mf">0.3206</span><span class="p">,</span> <span class="mf">0.3172</span><span class="p">,</span> <span class="mf">0.3138</span><span class="p">,</span> <span class="mf">0.3104</span><span class="p">,</span> <span class="mf">0.307</span><span class="p">,</span> <span class="mf">0.3003</span><span class="p">,</span> <span class="mf">0.2982</span><span class="p">,</span> <span class="mf">0.2935</span><span class="p">,</span> <span class="mf">0.2899</span><span class="p">,</span> <span class="mf">0.2867</span><span class="p">,</span> <span class="mf">0.2833</span><span class="p">,</span> <span class="mf">0.2817</span><span class="p">,</span> <span class="mf">0.2799</span><span class="p">,</span> <span class="mf">0.2767</span><span class="p">,</span> <span class="mf">0.2731</span><span class="p">,</span> <span class="mf">0.2664</span><span class="p">,</span> <span class="mf">0.2607</span><span class="p">,</span> <span class="mf">0.2562</span><span class="p">,</span> <span class="mf">0.1886</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">])</span>
    <span class="n">web2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5886</span><span class="p">,</span> <span class="mf">0.5868</span><span class="p">,</span> <span class="mf">0.5854</span><span class="p">,</span> <span class="mf">0.5508</span><span class="p">,</span> <span class="mf">0.5315</span><span class="p">,</span> <span class="mf">0.5131</span><span class="p">,</span> <span class="mf">0.4831</span><span class="p">,</span> <span class="mf">0.4658</span><span class="p">,</span> <span class="mf">0.4687</span><span class="p">,</span> <span class="mf">0.4726</span><span class="p">,</span> <span class="mf">0.477</span><span class="p">,</span> <span class="mf">0.4794</span><span class="p">,</span> <span class="mf">0.4828</span><span class="p">,</span> <span class="mf">0.4862</span><span class="p">,</span> <span class="mf">0.4896</span><span class="p">,</span> <span class="mf">0.493</span><span class="p">,</span> <span class="mf">0.4997</span><span class="p">,</span> <span class="mf">0.5018</span><span class="p">,</span> <span class="mf">0.5065</span><span class="p">,</span> <span class="mf">0.5101</span><span class="p">,</span> <span class="mf">0.5133</span><span class="p">,</span> <span class="mf">0.5167</span><span class="p">,</span> <span class="mf">0.5183</span><span class="p">,</span> <span class="mf">0.5201</span><span class="p">,</span> <span class="mf">0.5233</span><span class="p">,</span> <span class="mf">0.5269</span><span class="p">,</span> <span class="mf">0.5336</span><span class="p">,</span> <span class="mf">0.5393</span><span class="p">,</span> <span class="mf">0.5438</span><span class="p">,</span> <span class="mf">0.6114</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">])</span>
    <span class="n">web3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">])</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">chord_str_ref</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.2612</span><span class="p">,</span> <span class="mf">3.3100915356</span><span class="p">,</span> <span class="mf">3.32587052924</span><span class="p">,</span> <span class="mf">3.34159388653</span><span class="p">,</span> <span class="mf">3.35823798667</span><span class="p">,</span> <span class="mf">3.37384375335</span><span class="p">,</span>
        <span class="mf">3.38939112914</span><span class="p">,</span> <span class="mf">3.4774055542</span><span class="p">,</span> <span class="mf">3.49839685</span><span class="p">,</span> <span class="mf">3.51343645709</span><span class="p">,</span> <span class="mf">3.87017220335</span><span class="p">,</span> <span class="mf">4.04645623801</span><span class="p">,</span> <span class="mf">4.19408216643</span><span class="p">,</span>
         <span class="mf">4.47641008477</span><span class="p">,</span> <span class="mf">4.55844487985</span><span class="p">,</span> <span class="mf">4.57383098262</span><span class="p">,</span> <span class="mf">4.57285771934</span><span class="p">,</span> <span class="mf">4.51914315648</span><span class="p">,</span> <span class="mf">4.47677655262</span><span class="p">,</span> <span class="mf">4.40075650022</span><span class="p">,</span>
         <span class="mf">4.31069949379</span><span class="p">,</span> <span class="mf">4.20483735936</span><span class="p">,</span> <span class="mf">4.08985563932</span><span class="p">,</span> <span class="mf">3.82931757126</span><span class="p">,</span> <span class="mf">3.74220276467</span><span class="p">,</span> <span class="mf">3.54415796922</span><span class="p">,</span> <span class="mf">3.38732428502</span><span class="p">,</span>
         <span class="mf">3.24931446473</span><span class="p">,</span> <span class="mf">3.23421422609</span><span class="p">,</span> <span class="mf">3.22701537997</span><span class="p">,</span> <span class="mf">3.21972125648</span><span class="p">,</span> <span class="mf">3.08979310611</span><span class="p">,</span> <span class="mf">2.95152261813</span><span class="p">,</span> <span class="mf">2.330753331</span><span class="p">,</span>
         <span class="mf">2.05553464181</span><span class="p">,</span> <span class="mf">1.82577817774</span><span class="p">,</span> <span class="mf">1.5860853279</span><span class="p">,</span> <span class="mf">1.4621</span><span class="p">])</span>  <span class="c"># (Array, m): chord distribution for reference section, thickness of structural layup scaled with reference thickness (fixed t/c for this case)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ncomp</span><span class="p">):</span>

        <span class="n">webLoc</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">web1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">webLoc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">web1</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">web2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">webLoc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">web2</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">web3</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">webLoc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">web3</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="n">upper</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lower</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">webs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">CompositeSection</span><span class="o">.</span><span class="n">initFromPreCompLayupFile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;layup_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;.inp&#39;</span><span class="p">),</span> <span class="n">webLoc</span><span class="p">,</span> <span class="n">materials</span><span class="p">)</span>
        <span class="n">profile</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Profile</span><span class="o">.</span><span class="n">initFromPreCompFile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basepath</span><span class="p">,</span> <span class="s">&#39;shape_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;.inp&#39;</span><span class="p">))</span>

    <span class="n">rotor</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="n">materials</span>  <span class="c"># (List): list of all Orthotropic2DMaterial objects used in defining the geometry</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">upperCS</span> <span class="o">=</span> <span class="n">upper</span>  <span class="c"># (List): list of CompositeSection objections defining the properties for upper surface</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">lowerCS</span> <span class="o">=</span> <span class="n">lower</span>  <span class="c"># (List): list of CompositeSection objections defining the properties for lower surface</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">websCS</span> <span class="o">=</span> <span class="n">webs</span>  <span class="c"># (List): list of CompositeSection objections defining the properties for shear webs</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>  <span class="c"># (List): airfoil shape at each radial position</span>
    <span class="c"># --------------------------------------</span>


    <span class="c"># --- fatigue ---</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">rstar_damage</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.000</span><span class="p">,</span> <span class="mf">0.022</span><span class="p">,</span> <span class="mf">0.067</span><span class="p">,</span> <span class="mf">0.111</span><span class="p">,</span> <span class="mf">0.167</span><span class="p">,</span> <span class="mf">0.233</span><span class="p">,</span> <span class="mf">0.300</span><span class="p">,</span> <span class="mf">0.367</span><span class="p">,</span> <span class="mf">0.433</span><span class="p">,</span> <span class="mf">0.500</span><span class="p">,</span>
        <span class="mf">0.567</span><span class="p">,</span> <span class="mf">0.633</span><span class="p">,</span> <span class="mf">0.700</span><span class="p">,</span> <span class="mf">0.767</span><span class="p">,</span> <span class="mf">0.833</span><span class="p">,</span> <span class="mf">0.889</span><span class="p">,</span> <span class="mf">0.933</span><span class="p">,</span> <span class="mf">0.978</span><span class="p">])</span>  <span class="c"># (Array): nondimensional radial locations of damage equivalent moments</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">Mxb_damage</span> <span class="o">=</span> <span class="mf">1e3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">2.3743E+003</span><span class="p">,</span> <span class="mf">2.0834E+003</span><span class="p">,</span> <span class="mf">1.8108E+003</span><span class="p">,</span> <span class="mf">1.5705E+003</span><span class="p">,</span> <span class="mf">1.3104E+003</span><span class="p">,</span>
        <span class="mf">1.0488E+003</span><span class="p">,</span> <span class="mf">8.2367E+002</span><span class="p">,</span> <span class="mf">6.3407E+002</span><span class="p">,</span> <span class="mf">4.7727E+002</span><span class="p">,</span> <span class="mf">3.4804E+002</span><span class="p">,</span> <span class="mf">2.4458E+002</span><span class="p">,</span> <span class="mf">1.6339E+002</span><span class="p">,</span>
        <span class="mf">1.0252E+002</span><span class="p">,</span> <span class="mf">5.7842E+001</span><span class="p">,</span> <span class="mf">2.7349E+001</span><span class="p">,</span> <span class="mf">1.1262E+001</span><span class="p">,</span> <span class="mf">3.8549E+000</span><span class="p">,</span> <span class="mf">4.4738E-001</span><span class="p">])</span>  <span class="c"># (Array, N*m): damage equivalent moments about blade c.s. x-direction</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">Myb_damage</span> <span class="o">=</span> <span class="mf">1e3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">2.7732E+003</span><span class="p">,</span> <span class="mf">2.8155E+003</span><span class="p">,</span> <span class="mf">2.6004E+003</span><span class="p">,</span> <span class="mf">2.3933E+003</span><span class="p">,</span> <span class="mf">2.1371E+003</span><span class="p">,</span>
        <span class="mf">1.8459E+003</span><span class="p">,</span> <span class="mf">1.5582E+003</span><span class="p">,</span> <span class="mf">1.2896E+003</span><span class="p">,</span> <span class="mf">1.0427E+003</span><span class="p">,</span> <span class="mf">8.2015E+002</span><span class="p">,</span> <span class="mf">6.2449E+002</span><span class="p">,</span> <span class="mf">4.5229E+002</span><span class="p">,</span>
        <span class="mf">3.0658E+002</span><span class="p">,</span> <span class="mf">1.8746E+002</span><span class="p">,</span> <span class="mf">9.6475E+001</span><span class="p">,</span> <span class="mf">4.2677E+001</span><span class="p">,</span> <span class="mf">1.5409E+001</span><span class="p">,</span> <span class="mf">1.8426E+000</span><span class="p">])</span>  <span class="c"># (Array, N*m): damage equivalent moments about blade c.s. y-direction</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">strain_ult_spar</span> <span class="o">=</span> <span class="mf">1.0e-2</span>  <span class="c"># (Float): ultimate strain in spar cap</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">strain_ult_te</span> <span class="o">=</span> <span class="mi">2500</span><span class="o">*</span><span class="mf">1e-6</span> <span class="o">*</span> <span class="mi">2</span>   <span class="c"># (Float): uptimate strain in trailing-edge panels, note that I am putting a factor of two for the damage part only.</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">eta_damage</span> <span class="o">=</span> <span class="mf">1.35</span><span class="o">*</span><span class="mf">1.3</span><span class="o">*</span><span class="mf">1.0</span>  <span class="c"># (Float): safety factor for fatigue</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">m_damage</span> <span class="o">=</span> <span class="mf">10.0</span>  <span class="c"># (Float): slope of S-N curve for fatigue analysis</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">N_damage</span> <span class="o">=</span> <span class="mi">365</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">3600</span><span class="o">*</span><span class="mf">20.0</span>  <span class="c"># (Float): number of cycles used in fatigue analysis  TODO: make function of rotation speed</span>
    <span class="c"># ----------------</span>
    <span class="c"># =================</span>

    <span class="c"># === nacelle ======</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">L_ms</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c"># (Float, m): main shaft length downwind of main bearing in low-speed shaft</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">L_mb</span> <span class="o">=</span> <span class="mf">2.5</span>  <span class="c"># (Float, m): main shaft length in low-speed shaft</span>

    <span class="n">nacelle</span><span class="o">.</span><span class="n">h0_front</span> <span class="o">=</span> <span class="mf">1.7</span>  <span class="c"># (Float, m): height of Ibeam in bedplate front</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">h0_rear</span> <span class="o">=</span> <span class="mf">1.35</span>  <span class="c"># (Float, m): height of Ibeam in bedplate rear</span>

    <span class="n">turbine</span><span class="o">.</span><span class="n">generator_speed</span> <span class="o">=</span> <span class="mf">1173.7</span>  <span class="c"># (Float, rpm)  # generator speed</span>
    <span class="c"># TODO: sync with rotor drivetrainType variable</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">drivetrain_design</span> <span class="o">=</span> <span class="s">&#39;geared&#39;</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">crane</span> <span class="o">=</span> <span class="bp">True</span>  <span class="c"># (Bool): flag for presence of crane</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">bevel</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c"># (Int): Flag for the presence of a bevel stage - 1 if present, 0 if not</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">gear_configuration</span> <span class="o">=</span> <span class="s">&#39;eep&#39;</span>  <span class="c"># (Str): tring that represents the configuration of the gearbox (stage number and types)</span>

    <span class="n">nacelle</span><span class="o">.</span><span class="n">Np</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c"># (Array): number of planets in each stage</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">ratio_type</span> <span class="o">=</span> <span class="s">&#39;optimal&#39;</span>  <span class="c"># (Str): optimal or empirical stage ratios</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">shaft_type</span> <span class="o">=</span> <span class="s">&#39;normal&#39;</span>  <span class="c"># (Str): normal or short shaft length</span>
    <span class="c">#nacelle.shaft_angle = 5.0  # (Float, deg): Angle of the LSS inclindation with respect to the horizontal</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">shaft_ratio</span> <span class="o">=</span> <span class="mf">0.10</span>  <span class="c"># (Float): Ratio of inner diameter to outer diameter.  Leave zero for solid LSS</span>
    <span class="c">#nacelle.shrink_disc_mass = 1000.0  # (Float, kg): Mass of the shrink disc</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">mb1Type</span> <span class="o">=</span> <span class="s">&#39;CARB&#39;</span>  <span class="c"># (Str): Main bearing type: CARB, TRB or SRB</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">mb2Type</span> <span class="o">=</span> <span class="s">&#39;SRB&#39;</span>  <span class="c"># (Str): Second bearing type: CARB, TRB or SRB</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">yaw_motors_number</span> <span class="o">=</span> <span class="mf">8.0</span>  <span class="c"># (Float): number of yaw motors</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">uptower_transformer</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">flange_length</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c">#m</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">gearbox_cm</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">hss_length</span> <span class="o">=</span> <span class="mf">1.5</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">overhang</span> <span class="o">=</span> <span class="mf">5.0</span> <span class="c">#TODO - should come from turbine configuration level</span>

    <span class="n">nacelle</span><span class="o">.</span><span class="n">check_fatigue</span> <span class="o">=</span> <span class="mi">0</span> <span class="c">#0 if no fatigue check, 1 if parameterized fatigue check, 2 if known loads inputs</span>

    <span class="c"># TODO: should come from rotor (these are FAST outputs)</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">DrivetrainEfficiency</span> <span class="o">=</span> <span class="mf">0.95</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">rotor_bending_moment_x</span> <span class="o">=</span> <span class="mf">330770.0</span><span class="c"># Nm</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">rotor_bending_moment_y</span> <span class="o">=</span> <span class="o">-</span><span class="mf">16665000.0</span> <span class="c"># Nm</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">rotor_bending_moment_z</span> <span class="o">=</span> <span class="mf">2896300.0</span> <span class="c"># Nm</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">rotor_force_x</span> <span class="o">=</span> <span class="mf">599610.0</span> <span class="c"># N</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">rotor_force_y</span> <span class="o">=</span> <span class="mf">186780.0</span> <span class="c"># N</span>
    <span class="n">nacelle</span><span class="o">.</span><span class="n">rotor_force_z</span> <span class="o">=</span> <span class="o">-</span><span class="mf">842710.0</span> <span class="c"># N</span>

    <span class="c">#nacelle.h0_rear = 1.35 # only used in drive smooth</span>
    <span class="c">#nacelle.h0_front = 1.7</span>

    <span class="c"># =================</span>

    <span class="c"># === tower ===</span>

    <span class="c"># --- geometry ---</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>  <span class="c"># (Array): locations along unit tower, linear lofting between</span>
    <span class="n">turbine</span><span class="o">.</span><span class="n">tower_d</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">4.935</span><span class="p">,</span> <span class="mf">3.87</span><span class="p">]</span>  <span class="c"># (Array, m): diameters along tower</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.027</span><span class="o">*</span><span class="mf">1.3</span><span class="p">,</span> <span class="mf">0.023</span><span class="o">*</span><span class="mf">1.3</span><span class="p">,</span> <span class="mf">0.019</span><span class="o">*</span><span class="mf">1.3</span><span class="p">]</span>  <span class="c"># (Array, m): shell thickness at corresponding locations</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>  <span class="c"># (Array): number of finite elements between sections.  array length should be ``len(z)-1``</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">L_reinforced</span> <span class="o">=</span> <span class="mf">30.0</span>  <span class="c"># (Float, m): distance along tower for reinforcements used in buckling calc</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">downwind</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c"># (Bool): flag if rotor is downwind</span>
    <span class="c"># ---------------</span>

    <span class="c"># --- wind ---</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">wind_z0</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c"># (Float, m): bottom of wind profile (height of ground/sea)</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">wind1</span><span class="o">.</span><span class="n">shearExp</span> <span class="o">=</span> <span class="mf">0.2</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">wind2</span><span class="o">.</span><span class="n">shearExp</span> <span class="o">=</span> <span class="mf">0.2</span>
    <span class="c"># ---------------</span>

    <span class="c"># --- soil ---</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">soil</span><span class="o">.</span><span class="n">rigid</span> <span class="o">=</span> <span class="mi">6</span><span class="o">*</span><span class="p">[</span><span class="bp">True</span><span class="p">]</span>
    <span class="c"># ---------------</span>

    <span class="c"># --- safety factors ---</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">gamma_f</span> <span class="o">=</span> <span class="mf">1.35</span>  <span class="c"># (Float): safety factor on loads</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">gamma_m</span> <span class="o">=</span> <span class="mf">1.3</span>  <span class="c"># (Float): safety factor on materials</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">gamma_n</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c"># (Float): safety factor on consequence of failure</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">gamma_b</span> <span class="o">=</span> <span class="mf">1.1</span>  <span class="c"># (Float): buckling safety factor</span>
    <span class="c"># ---------------</span>

    <span class="c"># --- fatigue ---</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">z_DEL</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">87.6</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.000</span><span class="p">,</span> <span class="mf">1.327</span><span class="p">,</span> <span class="mf">3.982</span><span class="p">,</span> <span class="mf">6.636</span><span class="p">,</span> <span class="mf">9.291</span><span class="p">,</span> <span class="mf">11.945</span><span class="p">,</span> <span class="mf">14.600</span><span class="p">,</span> <span class="mf">17.255</span><span class="p">,</span> <span class="mf">19.909</span><span class="p">,</span>
        <span class="mf">22.564</span><span class="p">,</span> <span class="mf">25.218</span><span class="p">,</span> <span class="mf">27.873</span><span class="p">,</span> <span class="mf">30.527</span><span class="p">,</span> <span class="mf">33.182</span><span class="p">,</span> <span class="mf">35.836</span><span class="p">,</span> <span class="mf">38.491</span><span class="p">,</span> <span class="mf">41.145</span><span class="p">,</span> <span class="mf">43.800</span><span class="p">,</span> <span class="mf">46.455</span><span class="p">,</span> <span class="mf">49.109</span><span class="p">,</span> <span class="mf">51.764</span><span class="p">,</span>
        <span class="mf">54.418</span><span class="p">,</span> <span class="mf">57.073</span><span class="p">,</span> <span class="mf">59.727</span><span class="p">,</span> <span class="mf">62.382</span><span class="p">,</span> <span class="mf">65.036</span><span class="p">,</span> <span class="mf">67.691</span><span class="p">,</span> <span class="mf">70.345</span><span class="p">,</span> <span class="mf">73.000</span><span class="p">,</span> <span class="mf">75.655</span><span class="p">,</span> <span class="mf">78.309</span><span class="p">,</span> <span class="mf">80.964</span><span class="p">,</span> <span class="mf">83.618</span><span class="p">,</span>
        <span class="mf">86.273</span><span class="p">,</span> <span class="mf">87.600</span><span class="p">])</span>  <span class="c"># (Array): locations along unit tower for M_DEL</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">M_DEL</span> <span class="o">=</span> <span class="mf">1e3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.2940E+003</span><span class="p">,</span> <span class="mf">8.1518E+003</span><span class="p">,</span> <span class="mf">7.8831E+003</span><span class="p">,</span> <span class="mf">7.6099E+003</span><span class="p">,</span> <span class="mf">7.3359E+003</span><span class="p">,</span>
        <span class="mf">7.0577E+003</span><span class="p">,</span> <span class="mf">6.7821E+003</span><span class="p">,</span> <span class="mf">6.5119E+003</span><span class="p">,</span> <span class="mf">6.2391E+003</span><span class="p">,</span> <span class="mf">5.9707E+003</span><span class="p">,</span> <span class="mf">5.7070E+003</span><span class="p">,</span> <span class="mf">5.4500E+003</span><span class="p">,</span>
        <span class="mf">5.2015E+003</span><span class="p">,</span> <span class="mf">4.9588E+003</span><span class="p">,</span> <span class="mf">4.7202E+003</span><span class="p">,</span> <span class="mf">4.4884E+003</span><span class="p">,</span> <span class="mf">4.2577E+003</span><span class="p">,</span> <span class="mf">4.0246E+003</span><span class="p">,</span> <span class="mf">3.7942E+003</span><span class="p">,</span>
        <span class="mf">3.5664E+003</span><span class="p">,</span> <span class="mf">3.3406E+003</span><span class="p">,</span> <span class="mf">3.1184E+003</span><span class="p">,</span> <span class="mf">2.8977E+003</span><span class="p">,</span> <span class="mf">2.6811E+003</span><span class="p">,</span> <span class="mf">2.4719E+003</span><span class="p">,</span> <span class="mf">2.2663E+003</span><span class="p">,</span>
        <span class="mf">2.0673E+003</span><span class="p">,</span> <span class="mf">1.8769E+003</span><span class="p">,</span> <span class="mf">1.7017E+003</span><span class="p">,</span> <span class="mf">1.5479E+003</span><span class="p">,</span> <span class="mf">1.4207E+003</span><span class="p">,</span> <span class="mf">1.3304E+003</span><span class="p">,</span> <span class="mf">1.2780E+003</span><span class="p">,</span>
        <span class="mf">1.2673E+003</span><span class="p">,</span> <span class="mf">1.2761E+003</span><span class="p">])</span>  <span class="c"># (Array, N*m): damage equivalent moments along tower</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">gamma_fatigue</span> <span class="o">=</span> <span class="mf">1.35</span><span class="o">*</span><span class="mf">1.3</span><span class="o">*</span><span class="mf">1.0</span>  <span class="c"># (Float): total safety factor for fatigue</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">life</span> <span class="o">=</span> <span class="mf">20.0</span>  <span class="c"># (Float): fatigue life of tower</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">m_SN</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c"># (Int): slope of S/N curve</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">DC</span> <span class="o">=</span> <span class="mf">80.0</span>  <span class="c"># (Float): standard value of stress</span>
    <span class="c"># ---------------</span>

    <span class="c"># --- constraints ---</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">min_d_to_t</span> <span class="o">=</span> <span class="mf">120.0</span>  <span class="c"># (Float): minimum allowable diameter to thickness ratio</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">min_taper</span> <span class="o">=</span> <span class="mf">0.4</span>  <span class="c"># (Float): minimum allowable taper ratio from tower top to tower bottom</span>
    <span class="c"># ---------------</span>

    <span class="c"># --- material properties</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">sigma_y</span> <span class="o">=</span> <span class="mf">450000000.0</span>  <span class="c"># (Float, N/m**2): yield stress</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">rho</span> <span class="o">=</span> <span class="mf">8500.0</span>  <span class="c"># (Float, kg/m**3): material density</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">E</span> <span class="o">=</span> <span class="mf">2.1e+11</span>  <span class="c"># (Float, N/m**2): material modulus of elasticity</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">G</span> <span class="o">=</span> <span class="mf">80800000000.0</span>  <span class="c"># (Float, N/m**2): material shear modulus</span>
    <span class="c"># ----------------</span>
    <span class="c"># =================</span>

    <span class="c"># === run ===</span>
    <span class="n">turbine</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">print</span> <span class="s">&#39;mass rotor blades (kg) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">rotor</span><span class="o">.</span><span class="n">mass_all_blades</span>
    <span class="k">print</span> <span class="s">&#39;mass hub system (kg) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">hub</span><span class="o">.</span><span class="n">hub_system_mass</span>
    <span class="k">print</span> <span class="s">&#39;mass nacelle (kg) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">nacelle</span><span class="o">.</span><span class="n">nacelle_mass</span>
    <span class="k">print</span> <span class="s">&#39;mass tower (kg) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">tower</span><span class="o">.</span><span class="n">mass</span>
    <span class="k">print</span> <span class="s">&#39;maximum tip deflection (m) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">maxdeflection</span><span class="o">.</span><span class="n">max_tip_deflection</span>
    <span class="k">print</span> <span class="s">&#39;ground clearance (m) =&#39;</span><span class="p">,</span> <span class="n">turbine</span><span class="o">.</span><span class="n">maxdeflection</span><span class="o">.</span><span class="n">ground_clearance</span>
    <span class="c"># =================</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../../../index.html">WISDEM 0.1.0 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, NREL.
      Last updated on Oct 07, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>