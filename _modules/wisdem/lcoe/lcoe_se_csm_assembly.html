<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>wisdem.lcoe.lcoe_se_csm_assembly &mdash; WISDEM 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/nrel.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="WISDEM 0.1.0 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../../../index.html">WISDEM 0.1.0 documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for wisdem.lcoe.lcoe_se_csm_assembly</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">LCOE_csm_ssembly.py</span>

<span class="sd">Created by NWTC Systems Engineering Sub-Task on 2012-08-01.</span>
<span class="sd">Copyright (c) NREL. All rights reserved.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Assembly</span>
<span class="kn">from</span> <span class="nn">openmdao.main.datatypes.api</span> <span class="kn">import</span> <span class="n">Int</span><span class="p">,</span> <span class="n">Float</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">VarTree</span><span class="p">,</span> <span class="n">Bool</span>

<span class="kn">from</span> <span class="nn">wisdem.turbinese.turbine</span> <span class="kn">import</span> <span class="n">configure_turbine</span>
<span class="kn">from</span> <span class="nn">fusedwind.plant_cost.fused_finance</span> <span class="kn">import</span> <span class="n">configure_extended_financial_analysis</span><span class="p">,</span> <span class="n">ExtendedFinancialAnalysis</span>
<span class="kn">from</span> <span class="nn">fusedwind.plant_cost.fused_opex</span> <span class="kn">import</span> <span class="n">OPEXVarTree</span>
<span class="kn">from</span> <span class="nn">fusedwind.plant_cost.fused_bos_costs</span> <span class="kn">import</span> <span class="n">BOSVarTree</span>
<span class="kn">from</span> <span class="nn">fusedwind.interface</span> <span class="kn">import</span> <span class="n">implement_base</span>
<span class="kn">from</span> <span class="nn">turbine_costsse.turbine_costsse.turbine_costsse</span> <span class="kn">import</span> <span class="n">Turbine_CostsSE</span>
<span class="kn">from</span> <span class="nn">plant_costsse.nrel_csm_bos.nrel_csm_bos</span> <span class="kn">import</span> <span class="n">bos_csm_assembly</span>
<span class="kn">from</span> <span class="nn">plant_costsse.nrel_csm_opex.nrel_csm_opex</span> <span class="kn">import</span> <span class="n">opex_csm_assembly</span>
<span class="kn">from</span> <span class="nn">plant_financese.nrel_csm_fin.nrel_csm_fin</span> <span class="kn">import</span> <span class="n">fin_csm_assembly</span>
<span class="kn">from</span> <span class="nn">plant_energyse.basic_aep.basic_aep</span> <span class="kn">import</span> <span class="n">aep_assembly</span>
<span class="c">#from landbos import LandBOS</span>

<span class="c"># Current configuration assembly options for LCOE SE</span>
<div class="viewcode-block" id="configure_lcoe_with_turb_costs"><a class="viewcode-back" href="../../../documentation.html#wisdem.lcoe.lcoe_se_csm_assembly.configure_lcoe_with_turb_costs">[docs]</a><span class="k">def</span> <span class="nf">configure_lcoe_with_turb_costs</span><span class="p">(</span><span class="n">assembly</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    tcc_a inputs:</span>
<span class="sd">        advanced_blade = Bool</span>
<span class="sd">        offshore = Bool</span>
<span class="sd">        assemblyCostMultiplier = Float</span>
<span class="sd">        overheadCostMultiplier = Float</span>
<span class="sd">        profitMultiplier = Float</span>
<span class="sd">        transportMultiplier = Float</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;tcc_a&#39;</span><span class="p">,</span> <span class="n">Turbine_CostsSE</span><span class="p">())</span>

    <span class="c"># connections to turbine costs</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.mass_one_blade&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.blade_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;hub.hub_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.hub_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;hub.pitch_system_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.pitch_system_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;hub.spinner_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.spinner_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.low_speed_shaft_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.low_speed_shaft_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.main_bearing_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.main_bearing_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.second_bearing_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.second_bearing_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.gearbox_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.gearbox_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.high_speed_side_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.high_speed_side_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.generator_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.generator_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.bedplate_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.bedplate_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.yaw_system_mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.yaw_system_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;tower.mass&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.tower_mass&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.control.ratedPower&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.machine_rating&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.nBlades&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.blade_number&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.crane&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.crane&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;year&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.year&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;month&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.month&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;nacelle.drivetrain_design&#39;</span><span class="p">,</span> <span class="s">&#39;tcc_a.drivetrain_design&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="configure_lcoe_with_csm_bos"><a class="viewcode-back" href="../../../documentation.html#wisdem.lcoe.lcoe_se_csm_assembly.configure_lcoe_with_csm_bos">[docs]</a><span class="k">def</span> <span class="nf">configure_lcoe_with_csm_bos</span><span class="p">(</span><span class="n">assembly</span><span class="p">):</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;bos_a&#39;</span><span class="p">,</span> <span class="n">bos_csm_assembly</span><span class="p">())</span>

    <span class="c"># connections to bos</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;machine_rating&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.machine_rating&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.diameter&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.rotor_diameter&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.hubHt&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.hub_height&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;turbine_number&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.turbine_number&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.mass_all_blades + hub.hub_system_mass + nacelle.nacelle_mass&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.RNA_mass&#39;</span><span class="p">)</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;sea_depth&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.sea_depth&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;year&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.year&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;month&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.month&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="configure_lcoe_with_landbos"><a class="viewcode-back" href="../../../documentation.html#wisdem.lcoe.lcoe_se_csm_assembly.configure_lcoe_with_landbos">[docs]</a><span class="k">def</span> <span class="nf">configure_lcoe_with_landbos</span><span class="p">(</span><span class="n">assembly</span><span class="p">):</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;bos_a&#39;</span><span class="p">,</span> <span class="n">LandBOS</span><span class="p">())</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;voltage&#39;</span><span class="p">,</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kV&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;interconnect voltage&#39;</span><span class="p">))</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;distInter&#39;</span><span class="p">,</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;mi&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;distance to interconnect&#39;</span><span class="p">))</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;terrain&#39;</span><span class="p">,</span> <span class="n">Enum</span><span class="p">(</span><span class="s">&#39;FLAT_TO_ROLLING&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;FLAT_TO_ROLLING&#39;</span><span class="p">,</span> <span class="s">&#39;RIDGE_TOP&#39;</span><span class="p">,</span> <span class="s">&#39;MOUNTAINOUS&#39;</span><span class="p">),</span>
        <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;terrain options&#39;</span><span class="p">))</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;layout&#39;</span><span class="p">,</span> <span class="n">Enum</span><span class="p">(</span><span class="s">&#39;SIMPLE&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;SIMPLE&#39;</span><span class="p">,</span> <span class="s">&#39;COMPLEX&#39;</span><span class="p">),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;layout options&#39;</span><span class="p">))</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;soil&#39;</span><span class="p">,</span> <span class="n">Enum</span><span class="p">(</span><span class="s">&#39;STANDARD&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;STANDARD&#39;</span><span class="p">,</span> <span class="s">&#39;BOUYANT&#39;</span><span class="p">),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;soil options&#39;</span><span class="p">))</span>

    <span class="c"># connections to bos</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;machine_rating&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.machine_rating&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.diameter&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.rotor_diameter&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.hubHt&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.hub_height&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;turbine_number&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.turbine_number&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.mass_all_blades + hub.hub_system_mass + nacelle.nacelle_mass&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.RNA_mass&#39;</span><span class="p">)</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;voltage&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.voltage&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;distInter&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.distInter&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;terrain&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.terrain&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;layout&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.layout&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;soil&#39;</span><span class="p">,</span> <span class="s">&#39;bos_a.soil&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="configure_lcoe_with_csm_opex"><a class="viewcode-back" href="../../../documentation.html#wisdem.lcoe.lcoe_se_csm_assembly.configure_lcoe_with_csm_opex">[docs]</a><span class="k">def</span> <span class="nf">configure_lcoe_with_csm_opex</span><span class="p">(</span><span class="n">assembly</span><span class="p">):</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;opex_a&#39;</span><span class="p">,</span> <span class="n">opex_csm_assembly</span><span class="p">())</span>

    <span class="c"># connections to opex</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;machine_rating&#39;</span><span class="p">,</span> <span class="s">&#39;opex_a.machine_rating&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;sea_depth&#39;</span><span class="p">,</span> <span class="s">&#39;opex_a.sea_depth&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;year&#39;</span><span class="p">,</span> <span class="s">&#39;opex_a.year&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;month&#39;</span><span class="p">,</span> <span class="s">&#39;opex_a.month&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;turbine_number&#39;</span><span class="p">,</span> <span class="s">&#39;opex_a.turbine_number&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;aep_a.net_aep&#39;</span><span class="p">,</span> <span class="s">&#39;opex_a.net_aep&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="configure_lcoe_with_basic_aep"><a class="viewcode-back" href="../../../documentation.html#wisdem.lcoe.lcoe_se_csm_assembly.configure_lcoe_with_basic_aep">[docs]</a><span class="k">def</span> <span class="nf">configure_lcoe_with_basic_aep</span><span class="p">(</span><span class="n">assembly</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    aep inputs:</span>
<span class="sd">        array_losses = Float</span>
<span class="sd">        other_losses = Float</span>
<span class="sd">        availability = Float</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;aep_a&#39;</span><span class="p">,</span> <span class="n">aep_assembly</span><span class="p">())</span>

    <span class="c"># connections to aep</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;rotor.AEP&#39;</span><span class="p">,</span> <span class="s">&#39;aep_a.AEP_one_turbine&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;turbine_number&#39;</span><span class="p">,</span> <span class="s">&#39;aep_a.turbine_number&#39;</span><span class="p">)</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;machine_rating&#39;</span><span class="p">,</span><span class="s">&#39;aep_a.machine_rating&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="configure_lcoe_with_csm_fin"><a class="viewcode-back" href="../../../documentation.html#wisdem.lcoe.lcoe_se_csm_assembly.configure_lcoe_with_csm_fin">[docs]</a><span class="k">def</span> <span class="nf">configure_lcoe_with_csm_fin</span><span class="p">(</span><span class="n">assembly</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    fin inputs:</span>
<span class="sd">        fixed_charge_rate = Float</span>
<span class="sd">        construction_finance_rate = Float</span>
<span class="sd">        tax_rate = Float</span>
<span class="sd">        discount_rate = Float</span>
<span class="sd">        construction_time = Float</span>
<span class="sd">        project_lifetime = Float</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">assembly</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;fin_a&#39;</span><span class="p">,</span> <span class="n">fin_csm_assembly</span><span class="p">())</span>

    <span class="c"># connections to fin</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;sea_depth&#39;</span><span class="p">,</span> <span class="s">&#39;fin_a.sea_depth&#39;</span><span class="p">)</span>

<span class="c"># ====================================================================</span>
<span class="c"># Overall assembly configuration</span></div>
<div class="viewcode-block" id="configure_lcoe_se"><a class="viewcode-back" href="../../../documentation.html#wisdem.lcoe.lcoe_se_csm_assembly.configure_lcoe_se">[docs]</a><span class="k">def</span> <span class="nf">configure_lcoe_se</span><span class="p">(</span><span class="n">assembly</span><span class="p">,</span> <span class="n">with_new_nacelle</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">with_landbos</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">flexible_blade</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">with_3pt_drive</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    tcc_a inputs:</span>
<span class="sd">        advanced_blade = Bool</span>
<span class="sd">        offshore = Bool</span>
<span class="sd">        assemblyCostMultiplier = Float</span>
<span class="sd">        overheadCostMultiplier = Float</span>
<span class="sd">        profitMultiplier = Float</span>
<span class="sd">        transportMultiplier = Float</span>
<span class="sd">    aep inputs:</span>
<span class="sd">        array_losses = Float</span>
<span class="sd">        other_losses = Float</span>
<span class="sd">        availability = Float</span>
<span class="sd">    fin inputs:</span>
<span class="sd">        fixed_charge_rate = Float</span>
<span class="sd">        construction_finance_rate = Float</span>
<span class="sd">        tax_rate = Float</span>
<span class="sd">        discount_rate = Float</span>
<span class="sd">        construction_time = Float</span>
<span class="sd">        project_lifetime = Float</span>
<span class="sd">    inputs:</span>
<span class="sd">        sea_depth</span>
<span class="sd">        year</span>
<span class="sd">        month</span>
<span class="sd">    if with_landbos additional inputs:</span>
<span class="sd">        voltage</span>
<span class="sd">        distInter</span>
<span class="sd">        terrain</span>
<span class="sd">        layout</span>
<span class="sd">        soil</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># configure base assembly</span>
    <span class="n">configure_extended_financial_analysis</span><span class="p">(</span><span class="n">assembly</span><span class="p">)</span>

    <span class="c"># add inputs #TODO: awkward adding class inputs in configuration step</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;sea_depth&#39;</span><span class="p">,</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;sea depth for offshore wind project&#39;</span><span class="p">))</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;year&#39;</span><span class="p">,</span> <span class="n">Int</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;year of project start&#39;</span><span class="p">))</span>
    <span class="n">assembly</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;month&#39;</span><span class="p">,</span> <span class="n">Int</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;month of project start&#39;</span><span class="p">))</span>

    <span class="c"># add TurbineSE assembly</span>
    <span class="n">configure_turbine</span><span class="p">(</span><span class="n">assembly</span><span class="p">,</span> <span class="n">with_new_nacelle</span><span class="p">,</span> <span class="n">flexible_blade</span><span class="p">,</span> <span class="n">with_3pt_drive</span><span class="p">)</span>

    <span class="c"># replace TCC with turbine_costs</span>
    <span class="n">configure_lcoe_with_turb_costs</span><span class="p">(</span><span class="n">assembly</span><span class="p">)</span>

    <span class="c"># replace BOS with either CSM or landbos</span>
    <span class="k">if</span> <span class="n">with_landbos</span><span class="p">:</span>
    	  <span class="n">configure_lcoe_with_landbos</span><span class="p">(</span><span class="n">assembly</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
    	  <span class="n">configure_lcoe_with_csm_bos</span><span class="p">(</span><span class="n">assembly</span><span class="p">)</span>
    
    <span class="c"># replace OPEX with CSM opex</span>
    <span class="n">configure_lcoe_with_csm_opex</span><span class="p">(</span><span class="n">assembly</span><span class="p">)</span>
    
    <span class="c"># replace AEP with CSM AEP</span>
    <span class="n">configure_lcoe_with_basic_aep</span><span class="p">(</span><span class="n">assembly</span><span class="p">)</span>

    <span class="c"># replace Finance with CSM Finance</span>
    <span class="n">configure_lcoe_with_csm_fin</span><span class="p">(</span><span class="n">assembly</span><span class="p">)</span>


<span class="c"># =============================================================================</span>
<span class="c"># Overall LCOE Assembly</span></div>
<span class="nd">@implement_base</span><span class="p">(</span><span class="n">ExtendedFinancialAnalysis</span><span class="p">)</span>
<div class="viewcode-block" id="lcoe_se_assembly"><a class="viewcode-back" href="../../../documentation.html#wisdem.lcoe.lcoe_se_csm_assembly.lcoe_se_assembly">[docs]</a><span class="k">class</span> <span class="nc">lcoe_se_assembly</span><span class="p">(</span><span class="n">Assembly</span><span class="p">):</span>

    <span class="c"># Base I/O</span>
    <span class="c"># Inputs</span>
    <span class="n">turbine_number</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="n">iotype</span> <span class="o">=</span> <span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="s">&#39;number of turbines at plant&#39;</span><span class="p">)</span>

    <span class="c">#Outputs</span>
    <span class="n">turbine_cost</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span> <span class="o">=</span> <span class="s">&#39;A Wind Turbine Capital _cost&#39;</span><span class="p">)</span>
    <span class="n">bos_costs</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;A Wind Plant Balance of Station _cost Model&#39;</span><span class="p">)</span>
    <span class="n">avg_annual_opex</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;A Wind Plant Operations Expenditures Model&#39;</span><span class="p">)</span>
    <span class="n">net_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;A Wind Plant Annual Energy Production Model&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">)</span>
    <span class="n">coe</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Levelized cost of energy for the wind plant&#39;</span><span class="p">)</span>
    <span class="n">opex_breakdown</span> <span class="o">=</span> <span class="n">VarTree</span><span class="p">(</span><span class="n">OPEXVarTree</span><span class="p">(),</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">)</span>
    <span class="n">bos_breakdown</span> <span class="o">=</span> <span class="n">VarTree</span><span class="p">(</span><span class="n">BOSVarTree</span><span class="p">(),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;BOS cost breakdown&#39;</span><span class="p">)</span>

    <span class="c"># Configuration options</span>
    <span class="n">with_new_nacelle</span> <span class="o">=</span> <span class="n">Bool</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;configure with DriveWPACT if false, else configure with DriveSE&#39;</span><span class="p">)</span>
    <span class="n">with_landbose</span> <span class="o">=</span> <span class="n">Bool</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;configure with CSM BOS if flase, else configure with new LandBOS model&#39;</span><span class="p">)</span>
    <span class="n">flexible_blade</span> <span class="o">=</span> <span class="n">Bool</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;configure rotor with flexible blade if True&#39;</span><span class="p">)</span>
    <span class="n">with_3pt_drive</span> <span class="o">=</span> <span class="n">Bool</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;only used if configuring DriveSE - selects 3 pt or 4 pt design option&#39;</span><span class="p">)</span> <span class="c"># TODO: change nacelle selection to enumerated rather than nested boolean</span>

    <span class="c"># Other I/O</span>
    <span class="n">eta_strain</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">1.35</span><span class="o">*</span><span class="mf">1.3</span><span class="o">*</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
    <span class="n">eta_dfl</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">1.35</span><span class="o">*</span><span class="mf">1.1</span><span class="o">*</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
    <span class="n">strain_ult_spar</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">1.0e-2</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
    <span class="n">strain_ult_te</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mi">2500</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
    <span class="c"># idx_strain = Array([0, 12, 14, 18, 22, 28, 34], iotype=&#39;in&#39;, dtype=np.int)</span>
    <span class="c"># idx_buckling = Array([10, 12, 14, 20, 23, 27, 31, 33], iotype=&#39;in&#39;, dtype=np.int)</span>
    <span class="n">freq_margin</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
    <span class="n">min_ground_clearance</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
    <span class="c"># idx_tower_stress = Array([0, 4, 8, 10, 12, 14], iotype=&#39;in&#39;, dtype=np.int)</span>
    <span class="c"># idx_tower_fatigue = Array([0, 3, 6, 9, 12, 15, 18, 20], iotype=&#39;in&#39;, dtype=np.int)</span>


    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">with_new_nacelle</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">with_landbos</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">flexible_blade</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">with_3pt_drive</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">with_new_nacelle</span> <span class="o">=</span> <span class="n">with_new_nacelle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">with_landbos</span> <span class="o">=</span> <span class="n">with_landbos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flexible_blade</span> <span class="o">=</span> <span class="n">flexible_blade</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">with_3pt_drive</span> <span class="o">=</span> <span class="n">with_3pt_drive</span>
        
        <span class="nb">super</span><span class="p">(</span><span class="n">lcoe_se_assembly</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">configure_lcoe_se</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">with_new_nacelle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">with_landbos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">flexible_blade</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">with_3pt_drive</span><span class="p">)</span>
</div>
<span class="k">def</span> <span class="nf">example</span><span class="p">(</span><span class="n">wind_class</span><span class="o">=</span><span class="s">&#39;I&#39;</span><span class="p">,</span><span class="n">sea_depth</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">with_new_nacelle</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">with_landbos</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">flexible_blade</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">with_3pt_drive</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Inputs:</span>
<span class="sd">        wind_class : str (&#39;I&#39;, &#39;III&#39;, &#39;Offshore&#39; - selected wind class for project)</span>
<span class="sd">        sea_depth : float (sea depth if an offshore wind plant)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># === Create LCOE SE assembly ========</span>
    <span class="n">lcoe_se</span> <span class="o">=</span> <span class="n">lcoe_se_assembly</span><span class="p">(</span><span class="n">with_new_nacelle</span><span class="p">,</span><span class="n">with_landbos</span><span class="p">,</span><span class="n">flexible_blade</span><span class="p">,</span><span class="n">with_3pt_drive</span><span class="p">)</span>

    <span class="c"># === Set assembly variables and objects ===</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">sea_depth</span> <span class="o">=</span> <span class="n">sea_depth</span> <span class="c"># 0.0 for land-based turbine</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">turbine_number</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="mi">2009</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">month</span> <span class="o">=</span> <span class="mi">12</span>

    <span class="n">rotor</span> <span class="o">=</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">rotor</span>
    <span class="n">nacelle</span> <span class="o">=</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">nacelle</span>
    <span class="n">tower</span> <span class="o">=</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">tower</span>
    <span class="n">tcc_a</span> <span class="o">=</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">tcc_a</span>
    <span class="c"># bos_a = lcoe_se.bos_a</span>
    <span class="c"># opex_a = lcoe_se.opex_a</span>
    <span class="n">aep_a</span> <span class="o">=</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">aep_a</span>
    <span class="n">fin_a</span> <span class="o">=</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">fin_a</span>

    <span class="c"># Turbine ===========</span>
    <span class="kn">from</span> <span class="nn">wisdem.reference_turbines.nrel5mw.nrel5mw</span> <span class="kn">import</span> <span class="n">configure_nrel5mw_turbine</span>
    <span class="n">configure_nrel5mw_turbine</span><span class="p">(</span><span class="n">rotor</span><span class="p">,</span><span class="n">nacelle</span><span class="p">,</span><span class="n">tower</span><span class="p">,</span><span class="n">wind_class</span><span class="p">,</span><span class="n">lcoe_se</span><span class="o">.</span><span class="n">sea_depth</span><span class="p">)</span>

    <span class="c"># TODO: these should be specified at the turbine level and connected to other system inputs</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">tower_d</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">4.935</span><span class="p">,</span> <span class="mf">3.87</span><span class="p">]</span>  <span class="c"># (Array, m): diameters along tower</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">generator_speed</span> <span class="o">=</span> <span class="mf">1173.7</span>  <span class="c"># (Float, rpm)  # generator speed</span>
    <span class="c"># extra variable constant for now</span>
    <span class="c">#lcoe_se.nacelle.bedplate.rotor_bending_moment_y = -2.3250E+06 # shouldnt be needed anymore</span>

    <span class="c"># additional 5 MW reference variables #TODO: these should go into turbine level</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">strain_ult_spar</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">strain_ult_spar</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">strain_ult_te</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">strain_ult_te</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">eta_strain</span> <span class="o">=</span> <span class="mf">1.35</span><span class="o">*</span><span class="mf">1.3</span><span class="o">*</span><span class="mf">1.0</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">eta_dfl</span> <span class="o">=</span> <span class="mf">1.35</span><span class="o">*</span><span class="mf">1.1</span><span class="o">*</span><span class="mf">1.0</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">freq_margin</span> <span class="o">=</span> <span class="mf">1.1</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">min_ground_clearance</span> <span class="o">=</span> <span class="mf">20.0</span>

    <span class="c"># tcc ====</span>
    <span class="n">tcc_a</span><span class="o">.</span><span class="n">advanced_blade</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">tcc_a</span><span class="o">.</span><span class="n">offshore</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">tcc_a</span><span class="o">.</span><span class="n">assemblyCostMultiplier</span> <span class="o">=</span> <span class="mf">0.30</span>
    <span class="n">tcc_a</span><span class="o">.</span><span class="n">profitMultiplier</span> <span class="o">=</span> <span class="mf">0.20</span>
    <span class="n">tcc_a</span><span class="o">.</span><span class="n">overheadCostMultiplier</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">tcc_a</span><span class="o">.</span><span class="n">transportMultiplier</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="c"># for new landBOS</span>
    <span class="sd">&#39;&#39;&#39; # === new landBOS ===</span>
<span class="sd">    lcoe_se.voltage = 137</span>
<span class="sd">    lcoe_se.distInter = 5</span>
<span class="sd">    lcoe_se.terrain = &#39;FLAT_TO_ROLLING&#39;</span>
<span class="sd">    lcoe_se.layout = &#39;SIMPLE&#39;</span>
<span class="sd">    lcoe_se.soil = &#39;STANDARD&#39; &#39;&#39;&#39;</span>

    <span class="c"># aep ====</span>
    <span class="n">aep_a</span><span class="o">.</span><span class="n">array_losses</span> <span class="o">=</span> <span class="mf">0.059</span>
    <span class="n">aep_a</span><span class="o">.</span><span class="n">other_losses</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">aep_a</span><span class="o">.</span><span class="n">availability</span> <span class="o">=</span> <span class="mf">0.94</span>

    <span class="c"># fin ===</span>
    <span class="n">fin_a</span><span class="o">.</span><span class="n">fixed_charge_rate</span> <span class="o">=</span> <span class="mf">0.095</span>
    <span class="n">fin_a</span><span class="o">.</span><span class="n">construction_finance_rate</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">fin_a</span><span class="o">.</span><span class="n">tax_rate</span> <span class="o">=</span> <span class="mf">0.4</span>
    <span class="n">fin_a</span><span class="o">.</span><span class="n">discount_rate</span> <span class="o">=</span> <span class="mf">0.07</span>
    <span class="n">fin_a</span><span class="o">.</span><span class="n">construction_time</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">fin_a</span><span class="o">.</span><span class="n">project_lifetime</span> <span class="o">=</span> <span class="mf">20.0</span>

    <span class="c"># Set plant level inputs ===</span>
    <span class="n">shearExp</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c">#TODO : should be an input to lcoe</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">cdf_reference_height_wind_speed</span> <span class="o">=</span> <span class="mf">90.0</span>
    <span class="n">aep_a</span><span class="o">.</span><span class="n">array_losses</span> <span class="o">=</span> <span class="mf">0.15</span>
    <span class="n">aep_a</span><span class="o">.</span><span class="n">other_losses</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">aep_a</span><span class="o">.</span><span class="n">availability</span> <span class="o">=</span> <span class="mf">0.98</span>
    <span class="n">rotor</span><span class="o">.</span><span class="n">turbulence_class</span> <span class="o">=</span> <span class="s">&#39;B&#39;</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">bos_a</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="mf">2.23</span>

    <span class="k">if</span> <span class="n">wind_class</span> <span class="o">==</span> <span class="s">&#39;Offshore&#39;</span><span class="p">:</span>
        <span class="c"># rotor.turbulence_class = &#39;B&#39;</span>
        <span class="c"># rotor.cdf_reference_mean_wind_speed = 8.4</span>
        <span class="c"># rotor.cdf_reference_height_wind_speed = 50.0</span>
        <span class="c"># rotor.weibull_shape = 2.1</span>
        <span class="n">shearExp</span> <span class="o">=</span> <span class="mf">0.14</span> <span class="c"># TODO : should be an input to lcoe</span>
        <span class="c"># aep_a.array_losses = 0.15</span>
        <span class="c"># aep_a.other_losses = 0.0</span>
        <span class="n">aep_a</span><span class="o">.</span><span class="n">availability</span> <span class="o">=</span> <span class="mf">0.96</span>
        <span class="n">tcc_a</span><span class="o">.</span><span class="n">offshore</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">lcoe_se</span><span class="o">.</span><span class="n">bos_a</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="mf">2.33</span>
        <span class="n">lcoe_se</span><span class="o">.</span><span class="n">fin_a</span><span class="o">.</span><span class="n">fixed_charge_rate</span> <span class="o">=</span> <span class="mf">0.118</span>

    <span class="n">rotor</span><span class="o">.</span><span class="n">shearExp</span> <span class="o">=</span> <span class="n">shearExp</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">wind1</span><span class="o">.</span><span class="n">shearExp</span> <span class="o">=</span> <span class="n">shearExp</span>
    <span class="n">tower</span><span class="o">.</span><span class="n">wind2</span><span class="o">.</span><span class="n">shearExp</span> <span class="o">=</span> <span class="n">shearExp</span>

    <span class="c"># ====</span>

    <span class="c"># === Run default assembly and print results</span>
    <span class="n">lcoe_se</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="c"># ====</span>

    <span class="c"># === Print ===</span>

    <span class="k">print</span> <span class="s">&quot;Key Turbine Outputs for NREL 5 MW Reference Turbine&quot;</span>
    <span class="k">print</span> <span class="s">&#39;mass rotor blades (kg) =&#39;</span><span class="p">,</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">rotor</span><span class="o">.</span><span class="n">mass_all_blades</span>
    <span class="k">print</span> <span class="s">&#39;mass hub system (kg) =&#39;</span><span class="p">,</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">hub</span><span class="o">.</span><span class="n">hub_system_mass</span>
    <span class="k">print</span> <span class="s">&#39;mass nacelle (kg) =&#39;</span><span class="p">,</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">nacelle</span><span class="o">.</span><span class="n">nacelle_mass</span>
    <span class="k">print</span> <span class="s">&#39;mass tower (kg) =&#39;</span><span class="p">,</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">tower</span><span class="o">.</span><span class="n">mass</span>
    <span class="k">print</span> <span class="s">&#39;maximum tip deflection (m) =&#39;</span><span class="p">,</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">maxdeflection</span><span class="o">.</span><span class="n">max_tip_deflection</span>
    <span class="k">print</span> <span class="s">&#39;ground clearance (m) =&#39;</span><span class="p">,</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">maxdeflection</span><span class="o">.</span><span class="n">ground_clearance</span>
    <span class="k">print</span>
    <span class="k">print</span> <span class="s">&quot;Key Plant Outputs for wind plant with NREL 5 MW Turbine&quot;</span>
    <span class="c">#print &quot;LCOE: ${0:.4f} USD/kWh&quot;.format(lcoe_se.lcoe) # not in base output set (add to assembly output if desired)</span>
    <span class="k">print</span> <span class="s">&quot;COE: ${0:.4f} USD/kWh&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe_se</span><span class="o">.</span><span class="n">coe</span><span class="p">)</span>
    <span class="k">print</span>
    <span class="k">print</span> <span class="s">&quot;AEP per turbine: {0:1f} kWh/turbine&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe_se</span><span class="o">.</span><span class="n">net_aep</span> <span class="o">/</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">turbine_number</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;Turbine Cost: ${0:2f} USD&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe_se</span><span class="o">.</span><span class="n">turbine_cost</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;BOS costs per turbine: ${0:2f} USD/turbine&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe_se</span><span class="o">.</span><span class="n">bos_costs</span> <span class="o">/</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">turbine_number</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;OPEX per turbine: ${0:2f} USD/turbine&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lcoe_se</span><span class="o">.</span><span class="n">avg_annual_opex</span> <span class="o">/</span> <span class="n">lcoe_se</span><span class="o">.</span><span class="n">turbine_number</span><span class="p">)</span>    

    <span class="c"># ====</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="c"># NREL 5 MW in land-based wind plant with high winds (as class I)</span>
    <span class="n">example</span><span class="p">(</span><span class="s">&#39;I&#39;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="bp">True</span><span class="p">,</span><span class="bp">False</span><span class="p">,</span><span class="bp">False</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
    <span class="c">#example(&#39;I&#39;,0.0,True,False,False,True)</span>
    <span class="c">#example(&#39;I&#39;,0.0,False,False,False,False)</span>
    <span class="c">#example(&#39;I&#39;,0.0,False,True,False,False)</span>
    <span class="c">#example(&#39;I&#39;,0.0,False,False,True,False) #TODO: circular dependency with fixed point iterator</span>

    <span class="c"># NREL 5 MW in land-based wind plant with low winds (as class III)</span>
    <span class="c">#example(&#39;III&#39;,0.0,True,False,False)</span>

    <span class="c"># NREL 5 MW in offshore plant with high winds and 20 m sea depth (as class I)</span>
    <span class="c">#example(&#39;Offshore&#39;,20.0,True,False,False)</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../../../index.html">WISDEM 0.1.0 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, NREL.
      Last updated on Oct 05, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>